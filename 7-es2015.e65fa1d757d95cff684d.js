(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"1MA0":function(t,e,s){"use strict";s.r(e),s.d(e,"HarwellModule",function(){return J});var r=s("ofXK"),i=s("tyNb"),a=s("JKqQ"),o=s("NCiM"),n=s("kCbX"),h=s("uhFJ"),c=s("7G6I");class d{constructor(){this.data=new Map;for(let t=0;t<=99;t++)this.data[t]=0;this.tapeNumber=1,this.shiftPosition=0}get(t){return this.data[t]}add(t,e){let s=this.data[t]+e;0!==this.shiftPosition&&(s*=Math.pow(10,this.shiftPosition),this.shiftPosition=0);const r=Math.trunc(s);if(this.data[t]=r,9==t){const t=Math.round(Math.abs(1e8*s)%1e8);this.data[8]=t}}subtract(t,e){let s=this.data[t]-e;0!==this.shiftPosition&&(s*=Math.pow(10,this.shiftPosition),this.shiftPosition=0);const r=Math.trunc(s);if(this.data[t]=r,9==t){const t=Math.round(Math.abs(1e8*s)%1e8);this.data[8]=t}}multiply(t,e){const s=this.get(t)*this.get(e),r=Math.abs(10*s)%1e7,i=Math.trunc(s/1e7);this.data[8]=r,this.data[9]=i,this.clear(e)}divide(t,e){const s=this.get(t)/1e7,r=Math.trunc(this.get(9)/s),i=Math.trunc(this.get(9)%s);this.data[e]=r,this.data[9]=i}clear(t){this.data[t]=0,9==t&&(this.data[8]=0)}}class u{static getOperation(t){return Math.trunc(u.getOrderCode(t)/1e4)}static getAddressA(t){return Math.trunc(u.getOrderCode(t)/100)%100}static getAddressB(t){return u.getOrderCode(t)%100}static getOrderCode(t){return Math.trunc(t/1e3)}}class l{constructor(t,e){this.entries=t,this.blockEntryIndices=e,this.index=0;for(const[s,r]of e)if(r===this.index){this.blockNumber=s;break}}searchBlock(t){if(!this.blockEntryIndices.has(t))throw new Error("Block not found on tape after full loop");this.index=this.blockEntryIndices.get(t),this.blockNumber=t}read(){const t=this.peek();return this.index++,this.index>=this.entries.length&&(this.index=0),t}peek(){if(0===this.entries.length)throw new Error("No entry on tape to read.");return this.entries[this.index]}peekAhead(){return this.peekAt(this.index===this.entries.length-1?0:this.index+1)}peekAt(t){if(0===this.entries.length)throw new Error("No entry on tape to read.");return this.entries[t]}}class p{constructor(){this.tapes=new Map,this.state=new d,this.output=[""]}setProgram(t){this.tapes=class{static assemble(t){const e=new Map;var s=1,r=[],i=new Map;return t.split("\n").forEach(t=>{if(t.startsWith(";"));else if(t.startsWith("#")){const e=Number(t.substr(1));i.set(e,r.length)}else if(t.startsWith("[")&&t.endsWith("]")){const e=Number(t.substr(1,t.length-2));i.set(e,r.length)}else if("==tape"==t)0!==r.length&&(e[s]=new l(r,i),s++,r=[],i=new Map);else if(5===t.length){const e=1e3*Number(t);r.push(e)}else if(9===t.length){const e=Number(t);r.push(e)}}),e[s]=new l(r,i),e}}.assemble(t)}get currentTape(){return this.state.tapeNumber>7?null:this.tapes[this.state.tapeNumber]}get currentBlockNumber(){return null!=this.currentTape?this.currentTape.blockNumber:null}peekNextEntry(){return this.state.tapeNumber>7?this.state.get(this.state.tapeNumber):this.currentTape.peek()}readNextEntry(){if(this.state.tapeNumber>7){const t=this.state.get(this.state.tapeNumber);return this.state.tapeNumber++,t}return this.currentTape.read()}step(){if(this.state.finished)return;const t=this.readNextEntry(),e=u.getOperation(t),s=u.getAddressA(t),r=u.getAddressB(t);switch(e){case 0:this.control(s,r);break;case 1:this.add(s,r);break;case 2:this.addAndClear(s,r);break;case 3:this.subtract(s,r);break;case 4:this.subtractAndClear(s,r);break;case 5:this.multiply(s,r);break;case 6:this.divide(s,r);break;case 7:this.transferPositiveModulus(s,r);break;default:throw new Error("Unknown order "+u.getOrderCode(t))}}control(t,e){if(t>=30&&t<=39)this.searchBlock(t%10,e);else if(t>=50&&t<=59)this.state.yes&&this.searchBlock(t%10,e);else if(t>=70&&t<=79)this.state.printLayout=t%10;else{if(!(t>=81&&t<=89)){switch(t){case 1:0===e&&this.finish();case 11:return void this.testPositive(e);case 12:return void this.testNegative(e);case 21:return void this.transferControl(e);case 22:return void(this.state.yes&&this.transferControl(e))}throw new Error("Unknown control instruction 0"+t+e)}this.state.shiftPosition=-t%10+2}}add(t,e){const s=this.read(t);1!==e?this.state.add(e,s):this.print(s)}addAndClear(t,e){this.add(t,e),this.state.clear(t)}subtract(t,e){const s=this.read(t);1!==e?this.state.subtract(e,s):this.print(s)}subtractAndClear(t,e){this.subtract(t,e),this.state.clear(t)}multiply(t,e){this.state.multiply(t,e)}divide(t,e){this.state.divide(t,e)}transferPositiveModulus(t,e){this.peek(t)<0?this.subtract(t,e):this.add(t,e)}testPositive(t){this.state.yes=this.read(t)>0}testNegative(t){this.state.yes=this.read(t)<0}searchBlock(t,e){this.tapes[e].searchBlock(t)}transferControl(t){this.state.tapeNumber=t}finish(){this.state.finished=!0}print(t){const e=(t<0?"":"+")+(t/1e7).toFixed(7);switch(this.state.printLayout){case 0:this.output.push("","","","","");break;case 3:this.output[this.output.length-1]+=e+"   ";break;case 4:this.output[this.output.length-1]+=e,this.output.push("")}}peek(t){return t>0&&t<8?this.tapes[t].peekData():this.state.get(t)}peekAhead(t){return t>0&&t<8?this.tapes[t].peekAhead():this.peek(t)}read(t){return t>0&&t<8?this.tapes[t].read():this.state.get(t)}}var g=s("FCAv"),b=s("+pcE");let m=(()=>{class t extends b.a{constructor(e,s,r){super(r),this.renderingContext=r,this.statusFlag=!1,this.activeColorValue=t.activeRegisterColor,this.passiveColorValue=t.passiveRegisterColor,this.meshes=[e],this.color=this.passiveColor,this.program=r.emitterShader,this.position=s,this.worldTransform=g.a.translation(this.position)}get status(){return this.statusFlag}set status(t){this.statusFlag=t,this.color=this.statusFlag?this.activeColorValue:this.passiveColorValue}get activeColor(){return this.activeColorValue}set activeColor(t){this.activeColorValue=t,this.statusFlag&&(this.color=this.activeColorValue)}get passiveColor(){return this.passiveColorValue}set passiveColor(t){this.passiveColorValue=t,this.statusFlag||(this.color=this.passiveColorValue)}}return t.activeRegisterColor=[1,1,1,1],t.passiveRegisterColor=[.2,.2,.2,1],t.passiveStoreColor=[0,.2,0,1],t.activeStoreColor=[0,1,0,1],t.passiveReadColor=[.2,0,0,1],t.activeReadColor=[1,0,0,1],t})(),f=(()=>{class t extends b.a{constructor(e,s){super(s),this.renderingContext=s,this.meshes=[e],this.color=t.passiveColor,this.program=s.emitterShader,this.position=h.a.zero}get digit(){return this.currentDigit}set digit(t){if(this.currentDigit===t)return;this.currentDigit=t;const e=t*(2*Math.PI/10);this.worldTransform=g.a.rotationX(Math.PI/2).multiply(g.a.translation(new h.a(0,.0095,0))).multiply(g.a.rotationZ(e)).multiply(g.a.translation(this.position))}}return t.activeColor=[1,.2,.2,1],t.passiveColor=[.6,.12,.12,1],t})();class w{constructor(t){this.isActive=!1,this.indicators=t,this.hasSignDigit=9===t.length}set value(t){if(this.currentValue!==t)if(null==t?(this.setActive(!1),t=0):this.setActive(!0),this.currentValue=t,this.hasSignDigit){this.indicators[0].digit=this.getSignDigit();for(let t=0;t<8;t++)this.indicators[t+1].digit=this.getDigit(t)}else for(let e=0;e<8;e++)this.indicators[e].digit=this.getDigit(e)}getSignDigit(){return this.currentValue>=0?0:9}getDigit(t){return Math.round(Math.abs(this.currentValue)/Math.pow(10,7-t))%10}setActive(t){if(this.isActive!==t){this.isActive=t;for(const e of this.indicators)e.color=t?f.activeColor:f.passiveColor}}}let C=(()=>{class t extends n.a{static createTube(t,e){const s=2*Math.PI/10,r=[];let i=0;for(let a=0;a<10;a++){const a=new h.a(t*Math.cos(i),0,t*Math.sin(i)),o=new h.a(t*Math.cos(i),-e,t*Math.sin(i)),n=new h.a(0,-e,0),c=h.a.zero;i+=s;const d=new h.a(t*Math.cos(i),0,t*Math.sin(i)),u=new h.a(t*Math.cos(i),-e,t*Math.sin(i));this.pushTriangle(r,a,c,d),this.pushTriangle(r,n,o,u),this.pushTriangle(r,a,d,o),this.pushTriangle(r,o,d,u)}return r}static createTubeRow(t){const e=[],s=this.createTube(this.tubeRadius,this.tubeHeight);let r=new h.a(-.23,0,t);for(let i=0;i<5;i++)this.appendWithOffset(e,s,r),r.x+=this.tubeDistance;r.x+=this.memoryRegisterMiddleGap;for(let i=0;i<4;i++)this.appendWithOffset(e,s,r),r.x+=this.tubeDistance;return e}static createAccumulatorTubeRow(){const t=[],e=this.createTube(this.tubeRadius,this.tubeHeight),s=new h.a(-.15,0,.1);for(let r=0;r<8;r++)this.appendWithOffset(t,e,s),s.x+=this.tubeDistance;return t}static createMemoryUnit(){const t=[];for(let e=0;e<5;e++){const s=this.createTubeRow(e*this.tubeDistance-.22);this.append(t,s)}for(let e=5;e<10;e++){const s=this.createTubeRow(e*this.tubeDistance-.165);this.append(t,s)}return t}static createAccumulator(){return this.createAccumulatorTubeRow()}}return t.tubeDistance=.0425,t.tubeRadius=.015,t.tubeHeight=.05,t.memoryRegisterMiddleGap=.1,t})();class S extends b.a{constructor(t,e,s,r,i,a){super(a),this.position=i;const c=b.a.withMesh(t,a);c.color=[.5,.5,.5,1],c.worldTransform=g.a.rotationX(Math.PI/2).multiply(g.a.translation(i));const d=b.a.withMesh(new o.a(n.a.createBox(new h.a(.25,.25,.1)),this.gl),a);d.color=[.5,.5,.5,1],d.worldTransform=g.a.translation(i.add(new h.a(0,0,-.15)));const u=b.a.withMesh(e,a);u.color=[.2,.2,.2,1],u.worldTransform=g.a.rotationX(Math.PI/2).multiply(g.a.translation(i));const l=b.a.withMesh(new o.a(n.a.createBox(new h.a(.05,.035,.02)),this.gl),a);l.color=[.2,.2,.2,1],l.worldTransform=g.a.translation(i.add(new h.a(.01,0,0))),this.children=[c,d,u,l],this.createRegisters(s,a),this.createStatusLights(r,a)}createStatusLights(t,e){this.storeStatusLight=this.createStatusLight(this.position.add(new h.a(-.02,.015,.02)),t,e),this.storeStatusLight.activeColor=m.activeStoreColor,this.storeStatusLight.passiveColor=m.passiveStoreColor,this.readStatusLight=this.createStatusLight(this.position.add(new h.a(.04,.015,.02)),t,e),this.readStatusLight.activeColor=m.activeReadColor,this.readStatusLight.passiveColor=m.passiveReadColor,this.statusLights=[this.createStatusLight(this.position.add(new h.a(0,.015,.02)),t,e),this.createStatusLight(this.position.add(new h.a(.02,.015,.02)),t,e),this.createStatusLight(this.position.add(new h.a(-.02,0,.02)),t,e),this.createStatusLight(this.position.add(new h.a(0,0,.02)),t,e),this.createStatusLight(this.position.add(new h.a(.02,0,.02)),t,e),this.createStatusLight(this.position.add(new h.a(.04,0,.02)),t,e),this.createStatusLight(this.position.add(new h.a(-.02,-.015,.02)),t,e),this.createStatusLight(this.position.add(new h.a(0,-.015,.02)),t,e),this.createStatusLight(this.position.add(new h.a(.02,-.015,.02)),t,e),this.createStatusLight(this.position.add(new h.a(.04,-.015,.02)),t,e)]}createStatusLight(t,e,s){return new m(e,t,s)}createRegisters(t,e){this.registers=[];let s=this.position.add(new h.a(-.23,-.2175,0));for(let r=0;r<5;r++){const i=this.createIndicators(t,e),a=new w(i);this.setIndicatorPositions(a,s),this.registers[r]=a,s=s.add(new h.a(0,C.tubeDistance,0))}s=s.add(new h.a(0,.055,0));for(let r=5;r<10;r++){const i=this.createIndicators(t,e),a=new w(i);this.setIndicatorPositions(a,s),this.registers[r]=a,s=s.add(new h.a(0,C.tubeDistance,0))}}createIndicators(t,e){const s=[];for(let r=0;r<9;r++)s[r]=new f(t,e);return s}setIndicatorPositions(t,e){const s=e.copy();for(let r=0;r<5;r++)t.indicators[r].position=s.copy(),s.x+=C.tubeDistance;s.x+=C.memoryRegisterMiddleGap;for(let r=5;r<9;r++)t.indicators[r].position=s.copy(),s.x+=C.tubeDistance}draw(){this.children.forEach(t=>{t.draw()}),this.renderingContext.emitterShader.use(),this.registers.forEach(t=>{for(const e of t.indicators)e.draw()}),this.storeStatusLight.draw(),this.readStatusLight.draw(),this.statusLights.forEach(t=>{t.draw()}),this.renderingContext.standardShader.use()}}class v{constructor(t){this.processor=t}disassemble(t){return(t/1e3).toString().padStart(5,"0")+" "+this.disassembleInstruction(t)}disassembleInstruction(t){switch(u.getOperation(t)){case 0:return this.disassembleControl(t);case 1:return this.disassembleAdd(t);case 2:return this.disassembleAddAndClear(t);case 3:return this.disassembleSubtract(t);case 4:return this.disassembleSubtractAndClear(t);case 5:return this.disassembleMultiply(t);case 6:return this.disassembleDivide(t);case 7:return this.disassembleTransferPositiveModulus(t);default:throw new Error("Unknown order "+u.getOrderCode(t))}}disassembleControl(t){const e=u.getAddressA(t),s=u.getAddressB(t);if(e>=30&&e<=39)return"SEARCH for block "+e%10+" on tape "+s;if(e>=50&&e<=59)return"CONDITIONAL SEARCH for block "+e%10+" on tape "+s+" ("+(this.processor.state.yes?"YES":"NO")+")";if(e>=70&&e<=79)return"PRINT LAYOUT "+e%10;if(e>=81&&e<=89){const t=-e%10+2;return"SELECT SHIFT POSITION "+String.fromCharCode("A".charCodeAt(0)-t+1)+" (10^"+t+")"}switch(e){case 1:if(0===s)return"FINISH";case 11:return"TEST POSITIVE ["+s+"] ("+this.format(this.processor.peek(s))+")";case 12:return"TEST NEGATIVE ["+s+"] ("+this.format(this.processor.peek(s))+")";case 21:return"TRANSFER to "+(s<10?"tape ":"")+s;case 22:return"CONDITIONAL TRANSFER to "+s+" ("+(this.processor.state.yes?"YES":"NO")+")";case 85:return"SHIFT";default:throw new Error("Unknown control order "+u.getOrderCode(t))}}disassembleAdd(t){const e=u.getAddressA(t),s=u.getAddressB(t),r=this.processor.peekAhead(e),i=this.format(r);if(1===s)return"PRINT ["+e+"] ("+i+")";const a=this.processor.peek(s);return"["+s+"] += ["+e+"] ("+this.format(a)+" + "+i+" = "+this.format(a+r)+")"}disassembleAddAndClear(t){const e=u.getAddressA(t),s=u.getAddressB(t),r=this.processor.peekAhead(e),i=this.format(r);if(0===s)return"CLEAR ["+e+"] ("+i+")";if(1===s)return"PRINT ["+e+"] ("+i+")";const a=this.processor.peek(s);return"["+s+"] += ["+e+"]; CLEAR ["+e+"] ("+this.format(a)+" + "+i+" = "+this.format(a+r)+")"}disassembleSubtract(t){const e=u.getAddressA(t),s=u.getAddressB(t),r=this.processor.peekAhead(e),i=this.format(r);if(0===s)return"CLEAR ["+e+"] ("+i+")";if(1===s)return"PRINT ["+e+"] ("+i+")";const a=this.processor.peek(s);return"["+s+"] -= ["+e+"]; CLEAR ["+e+"] ("+this.format(a)+" - "+i+" = "+this.format(a-r)+")"}disassembleSubtractAndClear(t){const e=u.getAddressA(t),s=u.getAddressB(t),r=this.processor.peekAhead(e),i=this.processor.peek(s);return"["+s+"] -= ["+e+"] ("+this.format(i)+" - "+this.format(r)+" = "+this.format(i-r)+")"}disassembleMultiply(t){const e=u.getAddressA(t),s=u.getAddressB(t),r=this.processor.peek(e),i=this.processor.peek(s);return"[09] = ["+e+"] * ["+s+"] ("+this.format(i)+" * "+this.format(i)+" = "+this.format(r*i/1e7)+")"}disassembleDivide(t){const e=u.getAddressA(t),s=u.getAddressB(t),r=this.processor.peek(9),i=this.processor.peek(e),a=this.format(r),o=this.format(i);return"["+s+"] = [09] / ["+e+"] ("+a+" / "+o+" = "+this.format(r/i*1e7)+"); [09] = [09] % ["+e+"] ("+a+" % "+o+" = "+this.format(r%i)+")"}disassembleTransferPositiveModulus(t){const e=u.getAddressA(t);return this.processor.peek(e)<0?"TRANSFER POSITIVE MODULUS: "+this.disassembleSubtract(t):"TRANSFER POSITIVE MODULUS: "+this.disassembleAdd(t)}format(t){return t>=1&&t<=9?"0.000000"+t:t>=-9&&t<=-1?"-0.000000"+-t:(t/1e7).toString()}}class k{constructor(t,e,s){this.id=t,this.title=e,this.text=s}}class A{static get programList(){return[new k("1","Example program 1","\n[1]\n20900\n21000\n22000\n23000\n24000\n25000\n10110\n+10000000\n10120\n+01000000\n10130\n+15500000\n03202\n02102\n\n==tape\n[2]\n11040\n51040\n07300\n11001\n07400\n10901\n12010\n13040\n31040\n01140\n24000\n20900\n05202\n00100"),new k("2","Example program 2","\n[1]\n20900\n21000\n22000\n23000\n24000\n25000\n10110\n+05000000\n10120\n+90000000\n10130\n+10000000\n10140\n+20000000\n11050\n03202\n02102\n\n==tape\n[2]\n07400\n11001\n33020\n01220\n05303\n02203\n25009\n64050\n20900\n15010\n03202\n\n==tape\n[3]\n00100")]}}class I extends b.a{constructor(t,e,s,r,i){super(i),this.position=r;const a=b.a.withMesh(t,i);a.color=[.5,.5,.5,1],a.worldTransform=g.a.rotationX(Math.PI/2).multiply(g.a.translation(r));const c=b.a.withMesh(new o.a(n.a.createBox(new h.a(.25,.25,.1)),this.gl),i);c.color=[.5,.5,.5,1],c.worldTransform=g.a.translation(r.add(new h.a(0,0,-.15)));const d=b.a.withMesh(e,i);d.color=[.2,.2,.2,1],d.worldTransform=g.a.rotationX(Math.PI/2).multiply(g.a.translation(r)),this.children=[a,c,d],this.createRegister(s,i)}createRegister(t,e){const s=this.position.add(new h.a(-.15,-.1,0)),r=this.createIndicators(t,e);this.register=new w(r),this.setIndicatorPositions(s)}createIndicators(t,e){const s=[];for(let r=0;r<8;r++)s[r]=new f(t,e);return s}setIndicatorPositions(t){const e=t.copy();for(let s=0;s<8;s++)this.register.indicators[s].position=e.copy(),e.x+=C.tubeDistance}draw(){this.children.forEach(t=>{t.draw()}),this.renderingContext.emitterShader.use();for(const t of this.register.indicators)t.draw();this.renderingContext.standardShader.use()}}class M extends c.a{constructor(t){super(t),this.isSingleStepping=!0,this.isSingleStepDone=!0,this.isInErrorState=!1,this.programList=A.programList,this.processor=new p,this.disassembler=new v(this.processor);const e=new o.a(n.a.createCase(new h.a(.25,.05,.25)),t.gl),s=new o.a(C.createMemoryUnit(),t.gl),r=new o.a(n.a.createBox(new h.a(.0025,.003,.0036)),t.gl),i=new o.a(n.a.createBox(new h.a(.003,.003,.0036)),t.gl),a=new o.a(C.createAccumulator(),t.gl),c=this.createMemoryUnitNode(e,s,r,i,new h.a(-.5,-.5,0)),d=this.createMemoryUnitNode(e,s,r,i,new h.a(-.5,0,0)),u=this.createMemoryUnitNode(e,s,r,i,new h.a(-.5,.5,0)),l=this.createMemoryUnitNode(e,s,r,i,new h.a(-.5,1,0)),g=this.createMemoryUnitNode(e,s,r,i,new h.a(-1,-.5,0)),b=this.createMemoryUnitNode(e,s,r,i,new h.a(-1,0,0)),m=this.createMemoryUnitNode(e,s,r,i,new h.a(-1,.5,0)),f=this.createMemoryUnitNode(e,s,r,i,new h.a(-1,1,0)),w=this.createMemoryUnitNode(e,s,r,i,new h.a(-1.5,1,0));this.accumulator8=this.createAccumulatorNode(e,a,r,new h.a(0,-.35,0)),this.accumulator9=this.createAccumulatorNode(e,a,r,new h.a(0,.5,0)),this.memoryBanks=[c,d,u,l,g,b,m,f,w],this.nodes=[...this.memoryBanks,this.accumulator8,this.accumulator9],this.light.position=new h.a(.5,2,.5),this.camera.eye=new h.a(0,.5,3.3),this.camera.target=new h.a(0,.25,0),this.clearColor=[.1,.1,.1,1],this.camera.orthoScaling=2.7,this.loadFirstProgram()}createMemoryUnitNode(t,e,s,r,i){return new S(t,e,s,r,i,this.renderingContext)}createAccumulatorNode(t,e,s,r){return new I(t,e,s,r,this.renderingContext)}onProgramChange(t){const e=this.programList.find(e=>e.id===t);this.processor.setProgram(e.text),this.resetProgram()}loadFirstProgram(){this.onProgramChange(this.programList[0].id)}resetProgram(){this.processor.output=[""],this.isSingleStepping=!0,this.isSingleStepDone=!0,this.isInErrorState=!1,this.errorText=void 0,this.processor.state.finished=!1,this.processor.state.tapeNumber=1,this.processor.state.shiftPosition=0,this.setIndicatorsPassive(),this.disassembleNextInstruction()}draw(t){super.draw(t);try{this.isInErrorState||this.runProcessorForFrame()}catch(e){console.error(e),this.errorText=e.message,this.isInErrorState=!0}this.copyStateToRenderObject(),this.renderingContext.standardShader.use(),this.nodes.forEach(t=>{t.draw()})}stepProcessor(){this.isSingleStepping=!0,this.isSingleStepDone=!1}runProcessor(){this.isSingleStepping=!this.isSingleStepping}runProcessorForFrame(){this.isSingleStepping?this.isSingleStepDone||(this.processor.step(),this.disassembleNextInstruction(),this.isSingleStepDone=!0):(this.processor.step(),this.disassembleNextInstruction()),this.processor.state.finished&&(this.isSingleStepping=!0)}copyStateToRenderObject(){const t=this.processor.peekNextEntry(),e=u.getOperation(t),s=u.getAddressA(t),r=u.getAddressB(t),i=0!==e,a=2===e||4===e;this.accumulator8.register.value=this.processor.peek(8),this.accumulator9.register.value=this.processor.peek(9);for(let o=0;o<9;o++){const t=this.memoryBanks[o];let e=!1,n=!1;for(let h=0;h<10;h++){const c=10*(o+1)+h;t.registers[h].value=this.processor.peek(c);let d=!1;i&&(c==s&&(e=!0,d=!0,a&&(n=!0,d=!0)),c==r&&(n=!0,d=!0)),t.statusLights[h].status=d}t.readStatusLight.status=e,t.storeStatusLight.status=n}}setIndicatorsPassive(){for(let t=0;t<9;t++){const e=this.memoryBanks[t];for(let t=0;t<10;t++){const s=e.registers[t];0!==s.value&&void 0!==s.value||(s.value=null)}}}disassembleNextInstruction(){var t;t=this.processor.state.tapeNumber>7?this.processor.state.get(this.processor.state.tapeNumber):this.processor.currentTape.peek(),this.nextInstructionText=this.processor.state.finished?"(finished)":this.disassembler.disassemble(t),console.log(this.nextInstructionText)}}var P=s("4u2P"),y=s("fXoL"),T=s("jhN1"),x=s("S8xs");function O(t,e){if(1&t&&(y.Jb(0,"option",18),y.Zb(1),y.Ib()),2&t){const t=e.$implicit;y.Tb("value",t.id),y.wb(1),y.ac(t.title)}}function N(t,e){if(1&t&&(y.Jb(0,"p",19),y.Zb(1),y.Ib()),2&t){const t=y.Qb();y.wb(1),y.ac(t.scene.errorText)}}function E(t,e){if(1&t&&(y.Jb(0,"p",13),y.Zb(1),y.Hb(2,"br"),y.Ib()),2&t){const t=e.$implicit;y.wb(1),y.ac(t)}}const L=[{path:"",component:(()=>{class t{constructor(t){this.isOrtographicProjection=!1,t.setTitle("Harwell Dekatron")}ngOnInit(){const t=this.appCanvas.surface.nativeElement.getContext("webgl");if(t){const e=new P.a(t);this.scene=new M(e),this.appCanvas.setScene(this.scene)}}onChangeOrtographicProjection(){this.isOrtographicProjection=!this.isOrtographicProjection,this.scene.camera.orthographic=this.isOrtographicProjection}}return t.\u0275fac=function(e){return new(e||t)(y.Gb(T.b))},t.\u0275cmp=y.Ab({type:t,selectors:[["harwell-component"]],viewQuery:function(t,e){if(1&t&&y.dc(a.a,3),2&t){let t;y.Vb(t=y.Pb())&&(e.appCanvas=t.first)}},decls:41,vars:13,consts:[["id","bodyContainer"],["id","leftPanel"],[3,"isAnimated"],[3,"isOpen"],["accordion-heading","","type","button",1,"btn","btn-link","btn-block","clearfix"],[1,"badge","badge-arrow","float-left"],[1,"float-left"],[1,"mb-3",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"btn-toolbar","mb-3"],["type","button",1,"btn","btn-primary","mr-2",3,"disabled","click"],["type","button",1,"btn","btn-primary","mr-4",3,"disabled","click"],["type","button",1,"btn","btn-primary","mr-2",3,"click"],[1,"mb-0"],[2,"min-height","5em"],["class","text-danger",4,"ngIf"],["class","mb-0",4,"ngFor","ngForOf"],["value","ds","type","checkbox",3,"checked","change"],[3,"value"],[1,"text-danger"]],template:function(t,e){1&t&&(y.Jb(0,"div",0),y.Jb(1,"div",1),y.Jb(2,"accordion",2),y.Jb(3,"accordion-group",3),y.Jb(4,"button",4),y.Jb(5,"span",5),y.Zb(6,"\u2b9e"),y.Ib(),y.Jb(7,"span",6),y.Zb(8,"Control"),y.Ib(),y.Ib(),y.Jb(9,"select",7),y.Ob("change",function(t){return e.scene.onProgramChange(t.target.value)}),y.Yb(10,O,2,2,"option",8),y.Ib(),y.Jb(11,"div",9),y.Jb(12,"button",10),y.Ob("click",function(){return e.scene.stepProcessor()}),y.Zb(13,"Step"),y.Ib(),y.Jb(14,"button",11),y.Ob("click",function(){return e.scene.runProcessor()}),y.Zb(15),y.Ib(),y.Jb(16,"button",12),y.Ob("click",function(){return e.scene.resetProgram()}),y.Zb(17,"Reload "),y.Ib(),y.Hb(18,"br"),y.Ib(),y.Jb(19,"p",13),y.Zb(20),y.Ib(),y.Jb(21,"p",14),y.Zb(22),y.Ib(),y.Yb(23,N,2,1,"p",15),y.Ib(),y.Jb(24,"accordion-group",3),y.Jb(25,"button",4),y.Jb(26,"span",5),y.Zb(27,"\u2b9e"),y.Ib(),y.Jb(28,"span",6),y.Zb(29,"Output"),y.Ib(),y.Ib(),y.Yb(30,E,3,1,"p",16),y.Ib(),y.Jb(31,"accordion-group"),y.Jb(32,"button",4),y.Jb(33,"span",5),y.Zb(34,"\u2b9e"),y.Ib(),y.Jb(35,"span",6),y.Zb(36,"Settings"),y.Ib(),y.Ib(),y.Jb(37,"label"),y.Jb(38,"input",17),y.Ob("change",function(){return e.onChangeOrtographicProjection()}),y.Ib(),y.Zb(39," Orthographic projection "),y.Ib(),y.Ib(),y.Ib(),y.Ib(),y.Hb(40,"app-canvas"),y.Ib()),2&t&&(y.wb(2),y.Tb("isAnimated",!0),y.wb(1),y.Tb("isOpen",!0),y.wb(7),y.Tb("ngForOf",e.scene.programList),y.wb(2),y.Tb("disabled",e.scene.processor.state.finished),y.wb(2),y.Tb("disabled",e.scene.processor.state.finished),y.wb(1),y.bc(" ",e.scene.isSingleStepping?"Run":"Stop"," "),y.wb(5),y.cc("Tape ",e.scene.processor.state.tapeNumber,", block ",e.scene.processor.currentBlockNumber,""),y.wb(2),y.bc("Order: ",e.scene.nextInstructionText,""),y.wb(1),y.Tb("ngIf",e.scene.isInErrorState),y.wb(1),y.Tb("isOpen",!0),y.wb(6),y.Tb("ngForOf",e.scene.processor.output),y.wb(8),y.Tb("checked",e.isOrtographicProjection))},directives:[x.a,x.c,r.i,r.j,a.a],styles:["#leftPanel[_ngcontent-%COMP%]{width:350px;height:768px;float:left;overflow-y:auto;white-space:normal}#bodyContainer[_ngcontent-%COMP%]{white-space:nowrap}.badge-arrow[_ngcontent-%COMP%]{margin-top:4px;transition-duration:.2s;transition-property:transform}.panel-open[_ngcontent-%COMP%]   .badge-arrow[_ngcontent-%COMP%]{transform:rotate(90deg)}ul[_ngcontent-%COMP%]{padding-left:25px}.gear-group-a[_ngcontent-%COMP%]{background-color:#99801a}.gear-group-l[_ngcontent-%COMP%]{background-color:#e6801a}.gear-group-n[_ngcontent-%COMP%]{background-color:#40bf4d}.gear-group-o[_ngcontent-%COMP%]{background-color:#fff}.gear-group-p[_ngcontent-%COMP%]{background-color:#80bf33}.gear-group-e[_ngcontent-%COMP%]{background-color:#7366b3}.gear-group-h[_ngcontent-%COMP%]{background-color:#a666b3}.gear-group-c[_ngcontent-%COMP%]{background-color:#80bfe6}.gear-group-k[_ngcontent-%COMP%]{background-color:#73ccbf}"]}),t})()}];let R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=y.Eb({type:t}),t.\u0275inj=y.Db({imports:[[i.a.forChild(L)],i.a]}),t})();var D=s("YP2Z");let J=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=y.Eb({type:t}),t.\u0275inj=y.Db({imports:[[r.b,R,D.a,x.b.forRoot()]]}),t})()}}]);