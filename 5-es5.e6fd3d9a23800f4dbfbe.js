function _get(t,e,i){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var r=_superPropBase(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(i):a.value}})(t,e,i||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){return function(){var e,i=_getPrototypeOf(t);if(_isNativeReflectConstruct()){var r=_getPrototypeOf(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return _possibleConstructorReturn(this,e)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _createForOfIteratorHelper(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=_unsupportedIterableToArray(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,n=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return n=t.done,t},e:function(t){s=!0,a=t},f:function(){try{n||null==r.return||r.return()}finally{if(s)throw a}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{YJky:function(t,e,i){"use strict";i.r(e),i.d(e,"AntikytheraModule",(function(){return k}));var r=i("ofXK"),a=i("tyNb"),n=function(){function t(e,i,r){_classCallCheck(this,t),this.x=e,this.y=i,this.z=r}return _createClass(t,[{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y,this.z+e.z)}},{key:"subtract",value:function(e){return new t(this.x-e.x,this.y-e.y,this.z-e.z)}},{key:"cross",value:function(e){return new t(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"el",get:function(){return[this.x,this.y,this.z]}},{key:"length",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"negated",get:function(){return new t(-this.x,-this.y,-this.z)}},{key:"normalized",get:function(){var e=1/this.length;return new t(this.x*e,this.y*e,this.z*e)}}],[{key:"zero",get:function(){return new t(0,0,0)}}]),t}(),s=function(){function t(e){_classCallCheck(this,t),this.el=e}return _createClass(t,[{key:"multiply",value:function(e){var i=this;return new t([i.e11*e.e11+i.e12*e.e21+i.e13*e.e31+i.e14*e.e41,i.e11*e.e12+i.e12*e.e22+i.e13*e.e32+i.e14*e.e42,i.e11*e.e13+i.e12*e.e23+i.e13*e.e33+i.e14*e.e43,i.e11*e.e14+i.e12*e.e24+i.e13*e.e34+i.e14*e.e44,i.e21*e.e11+i.e22*e.e21+i.e23*e.e31+i.e24*e.e41,i.e21*e.e12+i.e22*e.e22+i.e23*e.e32+i.e24*e.e42,i.e21*e.e13+i.e22*e.e23+i.e23*e.e33+i.e24*e.e43,i.e21*e.e14+i.e22*e.e24+i.e23*e.e34+i.e24*e.e44,i.e31*e.e11+i.e32*e.e21+i.e33*e.e31+i.e34*e.e41,i.e31*e.e12+i.e32*e.e22+i.e33*e.e32+i.e34*e.e42,i.e31*e.e13+i.e32*e.e23+i.e33*e.e33+i.e34*e.e43,i.e31*e.e14+i.e32*e.e24+i.e33*e.e34+i.e34*e.e44,i.e41*e.e11+i.e42*e.e21+i.e43*e.e31+i.e44*e.e41,i.e41*e.e12+i.e42*e.e22+i.e43*e.e32+i.e44*e.e42,i.e41*e.e13+i.e42*e.e23+i.e43*e.e33+i.e44*e.e43,i.e41*e.e14+i.e42*e.e24+i.e43*e.e34+i.e44*e.e44])}},{key:"e11",get:function(){return this.el[0]},set:function(t){this.el[0]=t}},{key:"e12",get:function(){return this.el[1]},set:function(t){this.el[1]=t}},{key:"e13",get:function(){return this.el[2]},set:function(t){this.el[2]=t}},{key:"e14",get:function(){return this.el[3]},set:function(t){this.el[3]=t}},{key:"e21",get:function(){return this.el[4]},set:function(t){this.el[4]=t}},{key:"e22",get:function(){return this.el[5]},set:function(t){this.el[5]=t}},{key:"e23",get:function(){return this.el[6]},set:function(t){this.el[6]=t}},{key:"e24",get:function(){return this.el[7]},set:function(t){this.el[7]=t}},{key:"e31",get:function(){return this.el[8]},set:function(t){this.el[8]=t}},{key:"e32",get:function(){return this.el[9]},set:function(t){this.el[9]=t}},{key:"e33",get:function(){return this.el[10]},set:function(t){this.el[10]=t}},{key:"e34",get:function(){return this.el[11]},set:function(t){this.el[11]=t}},{key:"e41",get:function(){return this.el[12]},set:function(t){this.el[12]=t}},{key:"e42",get:function(){return this.el[13]},set:function(t){this.el[13]=t}},{key:"e43",get:function(){return this.el[14]},set:function(t){this.el[14]=t}},{key:"e44",get:function(){return this.el[15]},set:function(t){this.el[15]=t}}],[{key:"translation",value:function(e){return new t([1,0,0,0,0,1,0,0,0,0,1,0,e.x,e.y,e.z,1])}},{key:"rotationX",value:function(e){var i=Math.cos(e),r=Math.sin(e);return new t([1,0,0,0,0,i,r,0,0,-r,i,0,0,0,0,1])}},{key:"rotationY",value:function(e){var i=Math.cos(e),r=Math.sin(e);return new t([i,0,r,0,0,1,0,0,-r,0,i,0,0,0,0,1])}},{key:"rotationZ",value:function(e){var i=Math.cos(e),r=Math.sin(e);return new t([i,-r,0,0,r,i,0,0,0,0,1,0,0,0,0,1])}},{key:"perspectiveProjection",value:function(e,i,r,a){var n=r*Math.tan(.5*e),s=-n,o=s*i,l=n*i;return new t([2*r/(l-o),0,0,0,0,2*r/(n-s),0,0,(l+o)/(l-o),(n+s)/(n-s),-(a+r)/(a-r),-1,0,0,-2*a*r/(a-r),0])}},{key:"orthographicProjection",value:function(e,i,r,a){var n=-e/2,s=e/2,o=-i/2,l=i/2,h=1/(s-n),u=1/(l-o),g=1/(a-r);return new t([2*h,0,0,0,0,2*u,0,0,0,0,-2*g,0,-(s+n)*h,-(l+o)*u,-(a+r)*g,1])}},{key:"view",value:function(e,i,r){var a=e.subtract(i).normalized,n=r.cross(a).normalized,s=a.cross(n).normalized;return new t([n.x,s.x,a.x,0,n.y,s.y,a.y,0,n.z,s.z,a.z,0,-n.dot(e),-s.dot(e),-a.dot(e),1])}},{key:"identity",get:function(){return new t([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}]),t}(),o=function(){function t(){_classCallCheck(this,t),this.up=new n(0,1,0),this.fov=Math.PI/4,this.aspect=1,this.near=.1,this.far=100}return _createClass(t,[{key:"setRotatingPosition",value:function(t){var e=1+t/16;this.eye=new n(1.75*Math.sin(e),.7*Math.sin(e+4.5),1.75*Math.cos(e))}},{key:"viewMatrix",get:function(){return s.view(this.eye,this.target,this.up)}},{key:"projectionMatrix",get:function(){return s.perspectiveProjection(this.fov,this.aspect,this.near,this.far)}}]),t}(),l=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"setRotatingPosition",value:function(t){var e=t/16;this.position=new n(2*Math.sin(e),1,2*Math.cos(e))}}]),t}(),h=function(){function t(e,i){_classCallCheck(this,t),this.gl=i,this.buffer=i.createBuffer(),this.bind(),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.createBuffer(e),this.gl.STATIC_DRAW),this.numVertices=e.length/2}return _createClass(t,[{key:"createBuffer",value:function(t){var e,i=[],r=_createForOfIteratorHelper(t);try{for(r.s();!(e=r.n()).done;){var a=e.value;i.push(a.x),i.push(a.y),i.push(a.z)}}catch(n){r.e(n)}finally{r.f()}return new Float32Array(i)}},{key:"bind",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer)}},{key:"draw",value:function(t){this.bind(),this.positionAttribLocation=t.getAttribLocation("position");var e=6*Float32Array.BYTES_PER_ELEMENT;this.gl.vertexAttribPointer(this.positionAttribLocation,3,this.gl.FLOAT,!1,e,0),this.gl.enableVertexAttribArray(this.positionAttribLocation),this.normalAttribLocation=t.getAttribLocation("normal"),this.gl.vertexAttribPointer(this.normalAttribLocation,3,this.gl.FLOAT,!1,e,3*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(this.normalAttribLocation),this.gl.drawArrays(this.gl.TRIANGLES,0,this.numVertices),this.gl.disableVertexAttribArray(this.positionAttribLocation),this.gl.disableVertexAttribArray(this.normalAttribLocation)}}]),t}(),u=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"createBox",value:function(t){var e=new n(-t.x,t.y,-t.z),i=new n(-t.x,t.y,t.z),r=new n(t.x,t.y,-t.z),a=new n(t.x,t.y,t.z),s=new n(-t.x,-t.y,-t.z),o=new n(-t.x,-t.y,t.z),l=new n(t.x,-t.y,-t.z),h=new n(t.x,-t.y,t.z),u=[];return this.pushTriangle(u,e,i,r),this.pushTriangle(u,r,i,a),this.pushTriangle(u,o,s,l),this.pushTriangle(u,o,l,h),this.pushTriangle(u,e,r,s),this.pushTriangle(u,s,r,l),this.pushTriangle(u,r,a,l),this.pushTriangle(u,l,a,h),this.pushTriangle(u,a,i,h),this.pushTriangle(u,h,i,o),this.pushTriangle(u,i,e,o),this.pushTriangle(u,o,e,s),u}},{key:"createDial",value:function(){var t=.01,e=.02,i=new n(-.1,t,0),r=new n(0,t,e),a=new n(0,t,-e),s=new n(-.1,-t,0),o=new n(0,-t,e),l=new n(0,-t,-e),h=[];return this.pushTriangle(h,i,r,a),this.pushTriangle(h,i,s,r),this.pushTriangle(h,r,s,o),this.pushTriangle(h,i,a,s),this.pushTriangle(h,s,a,l),this.pushTriangle(h,a,r,l),this.pushTriangle(h,l,r,o),this.pushTriangle(h,o,s,l),h}},{key:"createCylinder",value:function(t,e){for(var i=new n(0,-e,0),r=[],a=0,s=2*Math.PI/16,o=0;o<16;o++){var l=new n(t*Math.sin(a),0,t*Math.cos(a)),h=new n(t*Math.sin(a+s),0,t*Math.cos(a+s)),u=l.add(new n(0,-e,0)),g=h.add(new n(0,-e,0));this.pushTriangle(r,n.zero,l,h),this.pushTriangle(r,u,i,g),this.pushTriangle(r,h,l,u),this.pushTriangle(r,h,u,g),a+=s}return r}},{key:"pushTriangle",value:function(e,i,r,a){var n=t.calculateNormal(i,r,a);e.push(i,n,r,n,a,n)}},{key:"calculateNormal",value:function(t,e,i){var r=e.subtract(t),a=i.subtract(t);return new n(r.y*a.z-r.z*a.y,r.z*a.x-r.x*a.z,r.x*a.y-r.y*a.x).normalized}}]),t}(),g=function(t){_inherits(i,t);var e=_createSuper(i);function i(){return _classCallCheck(this,i),e.apply(this,arguments)}return _createClass(i,null,[{key:"create",value:function(t,e,i,r){return this.createWithAxle(t,e,i,r)}},{key:"createWithAxle",value:function(t,e,i,r){for(var a=[],s=Math.PI/t,o=0,l=0;l<t;l++){var h=new n(r*Math.sin(o),0,r*Math.cos(o)),u=new n(e*Math.sin(o),0,e*Math.cos(o));o+=s;var g=new n(i*Math.sin(o),0,i*Math.cos(o));o+=s;var c=new n(r*Math.sin(o),0,r*Math.cos(o)),f=new n(e*Math.sin(o),0,e*Math.cos(o)),p=h.subtract(new n(0,.025,0)),d=u.subtract(new n(0,.025,0)),w=g.subtract(new n(0,.025,0)),y=c.subtract(new n(0,.025,0)),m=f.subtract(new n(0,.025,0));this.pushTriangle(a,h,u,g),this.pushTriangle(a,h,g,c),this.pushTriangle(a,c,g,f),this.pushTriangle(a,d,p,w),this.pushTriangle(a,w,p,y),this.pushTriangle(a,w,y,m),this.pushTriangle(a,u,d,g),this.pushTriangle(a,g,d,w),this.pushTriangle(a,g,w,f),this.pushTriangle(a,f,w,m),this.pushTriangle(a,p,h,c),this.pushTriangle(a,p,c,y)}return a}},{key:"createClosed",value:function(t,e,i){return this.createWithAxle(t,e,i,.02)}},{key:"createFace",value:function(t,e,i){for(var r=i-e,a=e-.025,s=[],o=Math.PI/t,l=0,h=0;h<t;h++){var u=new n(e*Math.sin(l),-.1,e*Math.cos(l)),g=new n(a*Math.sin(l),-.1,a*Math.cos(l)),c=new n(e*Math.sin(l),0,e*Math.cos(l)),f=new n(a*Math.sin(l),0,a*Math.cos(l));l+=o;var p=new n(e*Math.sin(l),r,e*Math.cos(l)),d=new n(a*Math.sin(l),r,a*Math.cos(l));l+=o;var w=new n(e*Math.sin(l),-.1,e*Math.cos(l)),y=new n(a*Math.sin(l),-.1,a*Math.cos(l)),m=new n(e*Math.sin(l),0,e*Math.cos(l)),v=new n(a*Math.sin(l),0,a*Math.cos(l));this.pushTriangle(s,c,u,p),this.pushTriangle(s,p,u,w),this.pushTriangle(s,p,w,m),this.pushTriangle(s,g,f,d),this.pushTriangle(s,g,d,y),this.pushTriangle(s,y,d,v),this.pushTriangle(s,f,c,p),this.pushTriangle(s,f,p,d),this.pushTriangle(s,d,p,m),this.pushTriangle(s,d,m,v),this.pushTriangle(s,u,g,w),this.pushTriangle(s,w,g,y)}return s}}]),i}(u),c=function(){function t(e){_classCallCheck(this,t),this.gl=e,this.meshes=[],this.worldTransform=s.identity}return _createClass(t,[{key:"draw",value:function(t){this.gl.uniformMatrix4fv(t.worldMatrixLocation,!1,this.worldTransform.el);var e,i=_createForOfIteratorHelper(this.meshes);try{for(i.s();!(e=i.n()).done;){var r=e.value;r.childWorldTransform?(this.gl.uniformMatrix4fv(t.worldMatrixLocation,!1,this.worldTransform.multiply(r.childWorldTransform).el),r.draw(t),this.gl.uniformMatrix4fv(t.worldMatrixLocation,!1,this.worldTransform.el)):r.draw(t)}}catch(a){i.e(a)}finally{i.f()}}}],[{key:"withMesh",value:function(e,i){var r=new t(i);return r.meshes.push(e),r}}]),t}(),f=function(t){_inherits(i,t);var e=_createSuper(i);function i(t,r,a,n,s,o){var l;return _classCallCheck(this,i),(l=e.call(this,o)).numTeeth=t,l.outerRadius=r,l.innerRadius=a,l.axleRadius=n,l.meshes.push(s),l}return _createClass(i,[{key:"addCross",value:function(){var t=new h(u.createBox(new n(this.axleRadius,.01,.08)),this.gl);t.childWorldTransform=s.translation(new n(0,-.012,0));var e=new h(u.createBox(new n(.08,.01,this.axleRadius)),this.gl);e.childWorldTransform=s.translation(new n(0,-.011,0)),this.meshes.push(t,e)}},{key:"draw",value:function(t){_get(_getPrototypeOf(i.prototype),"draw",this).call(this,t)}},{key:"setAttributesToParent",value:function(t,e){this.setAngleToParent(t),this.setPositionToParent(t,e)}},{key:"setAttributesByParent",value:function(t,e){this.setAngleByParent(t),this.setAdjacentPosition(t,e)}},{key:"setAngleToParent",value:function(t){this.angle=t.angle}},{key:"setAngleByParent",value:function(t){this.angle=t.numTeeth/this.numTeeth*-t.angle}},{key:"setPositionToParent",value:function(t,e){this.position=t.position.add(new n(0,e,0))}},{key:"setAdjacentPosition",value:function(t,e){var i=this.innerRadius+t.innerRadius+(t.outerRadius-t.innerRadius+(this.outerRadius-this.innerRadius))/2;this.position=t.position.add(new n(i*Math.sin(e),0,i*Math.cos(e)))}}],[{key:"createFace",value:function(t,e,r){var a=i.getRightAngleToothInnerRadius(e,t);return new i(t,e,a,null,new h(g.createFace(t,e,a),r),r)}},{key:"create",value:function(t,e,r,a){var n=i.getRightAngleToothInnerRadius(e,t);return new i(t,e,n,r,new h(g.create(t,e,n,r),a),a)}},{key:"createClosed",value:function(t,e,r){var a=i.getRightAngleToothInnerRadius(e,t);return new i(t,e,a,null,new h(g.createClosed(t,e,a),r),r)}},{key:"getRightAngleToothInnerRadius",value:function(t,e){return t-2*Math.PI*t/e/2}}]),i}(c),p=function(t){_inherits(i,t);var e=_createSuper(i);function i(t){var r;return _classCallCheck(this,i),(r=e.call(this,t)).gearA1=f.createFace(48,.136,t),r.gearB1=f.create(233,.65,.45,t),r.gearB1.addCross(),r.gearB2=f.createClosed(64,.155,t),r.gearB3=f.createClosed(32,.095,t),r.axleB=c.withMesh(new h(u.createCylinder(.02,.18),t),t),r.moonDial=c.withMesh(new h(u.createDial(),t),t),r.gearC1=f.createClosed(38,.1,t),r.gearC2=f.createClosed(48,.11,t),r.gearD1=f.createClosed(24,.055,t),r.gearD2=f.createClosed(127,.315,t),r.axleD=c.withMesh(new h(u.createCylinder(.02,.12),t),t),r.gearE1=f.createClosed(32,.1,t),r.gearE2=f.createClosed(32,.08,t),r.gearE3=f.createClosed(223,.525,t),r.gearE4=f.create(188,.5,.425,t),r.gearE5=f.createClosed(50,.135,t),r.gearE6=f.createClosed(50,.14,t),r.axleE=c.withMesh(new h(u.createCylinder(.02,.17),t),t),r.gearF1=f.createClosed(53,.14,t),r.gearF2=f.createClosed(30,.08,t),r.gearG1=f.createClosed(54,.14,t),r.sarosDial=c.withMesh(new h(u.createDial(),t),t),r.gearG2=f.createClosed(20,.05,t),r.axleG=c.withMesh(new h(u.createCylinder(.02,.11),t),t),r.gearH1=f.createClosed(60,.14,t),r.gearH2=f.createClosed(15,.04,t),r.gearI1=f.createClosed(60,.13,t),r.exigemosDial=c.withMesh(new h(u.createDial(),t),t),r.axleI=c.withMesh(new h(u.createCylinder(.02,.04),t),t),r.gearL1=f.createClosed(38,.09,t),r.gearL2=f.createClosed(53,.131,t),r.gearK1=f.createClosed(50,.135,t),r.gearK2=f.createClosed(50,.14,t),r.gearM1=f.createClosed(96,.245,t),r.gearM2=f.createClosed(15,.044,t),r.gearM3=f.createClosed(27,.06,t),r.axleM=c.withMesh(new h(u.createCylinder(.02,.16),t),t),r.gearN1=f.createClosed(53,.125,t),r.gearN2=f.createClosed(57,.1,t),r.gearN3=f.createClosed(15,.05,t),r.metonicDial=c.withMesh(new h(u.createDial(),t),t),r.axleN=c.withMesh(new h(u.createCylinder(.02,.25),t),t),r.gearO1=f.createClosed(60,.09,t),r.olympicDial=c.withMesh(new h(u.createDial(),t),t),r.axleO=c.withMesh(new h(u.createCylinder(.02,.21),t),t),r.gearP1=f.createClosed(60,.13,t),r.gearP2=f.createClosed(12,.045,t),r.gearQ1=f.createClosed(60,.13,t),r.callipicDial=c.withMesh(new h(u.createDial(),t),t),r.axleQ=c.withMesh(new h(u.createCylinder(.02,.14),t),t),r}return _createClass(i,[{key:"draw",value:function(t,e){_get(_getPrototypeOf(i.prototype),"draw",this).call(this,t,e),this.drawNodes(t,e)}},{key:"drawNodes",value:function(t,e){this.gl.uniform4fv(t.vertColorLocation,[.6,.5,.1,.95]),this.gearA1.angle=1.2*e,this.gearA1.worldTransform=s.rotationY(this.gearA1.angle).multiply(s.rotationX(Math.PI/2)).multiply(s.translation(new n(0,.136-.025,-.649))),this.gearA1.draw(t),this.gearB1.setAngleByParent(this.gearA1),this.gearB1.position=n.zero;var i=s.rotationY(this.gearB1.angle);this.gearB1.worldTransform=i.multiply(s.translation(this.gearB1.position)),this.gearB1.draw(t),this.gearB2.setAttributesToParent(this.gearB1,-.035),this.gearB2.worldTransform=i.multiply(s.translation(this.gearB2.position)),this.gearB2.draw(t),this.gl.uniform4fv(t.vertColorLocation,[.9,.5,.1,.95]),this.gearL1.setAttributesByParent(this.gearB2,.2*Math.PI);var r=s.rotationY(this.gearL1.angle);this.gearL1.worldTransform=r.multiply(s.translation(this.gearL1.position)),this.gearL1.draw(t),this.gearL2.setAttributesToParent(this.gearL1,-.035),this.gearL2.worldTransform=r.multiply(s.translation(this.gearL2.position)),this.gearL2.draw(t),this.gearM1.setAttributesByParent(this.gearL2,1.8*Math.PI);var a=s.rotationY(this.gearM1.angle);this.gearM1.worldTransform=a.multiply(s.translation(this.gearM1.position)),this.gearM1.draw(t),this.gearM2.setAttributesToParent(this.gearM1,-.065),this.gearM2.worldTransform=a.multiply(s.translation(this.gearM2.position)),this.gearM2.draw(t),this.gearM3.setAttributesToParent(this.gearM2,-.07),this.gearM3.worldTransform=a.multiply(s.translation(this.gearM3.position)),this.gearM3.draw(t),this.axleM.position=this.gearM1.position.add(new n(0,-.005,0)),this.axleM.worldTransform=a.multiply(s.translation(this.axleM.position)),this.axleM.draw(t),this.gl.uniform4fv(t.vertColorLocation,[.25,.75,.3,.95]),this.gearN1.setAttributesByParent(this.gearM2,.2*Math.PI);var o=s.rotationY(this.gearN1.angle);this.gearN1.worldTransform=o.multiply(s.translation(this.gearN1.position)),this.gearN1.draw(t),this.gearN2.setAttributesToParent(this.gearN1,-.035),this.gearN2.worldTransform=o.multiply(s.translation(this.gearN2.position)),this.gearN2.draw(t),this.gearN3.setAttributesToParent(this.gearN2,-.035),this.gearN3.worldTransform=o.multiply(s.translation(this.gearN3.position)),this.gearN3.draw(t),this.metonicDial.position=this.gearN3.position.add(new n(0,.035*-5,0)),this.metonicDial.worldTransform=o.multiply(s.translation(this.metonicDial.position)),this.metonicDial.draw(t),this.axleN.position=this.gearN1.position.add(new n(0,-.005,0)),this.axleN.worldTransform=o.multiply(s.translation(this.axleN.position)),this.axleN.draw(t),this.gl.uniform4fv(t.vertColorLocation,[1,1,1,.95]),this.gearO1.setAngleByParent(this.gearN2);var l=s.rotationY(this.gearO1.angle);this.gearO1.setAdjacentPosition(this.gearN2,1.5*Math.PI),this.gearO1.worldTransform=l.multiply(s.translation(this.gearO1.position)),this.gearO1.draw(t),this.olympicDial.position=this.gearO1.position.add(new n(0,.035*-6,0)),this.olympicDial.worldTransform=l.multiply(s.translation(this.olympicDial.position)),this.olympicDial.draw(t),this.axleO.position=this.gearO1.position.add(new n(0,-.005,0)),this.axleO.worldTransform=l.multiply(s.translation(this.axleO.position)),this.axleO.draw(t),this.gl.uniform4fv(t.vertColorLocation,[.5,.75,.2,.95]),this.gearP1.setAttributesByParent(this.gearN3,.25*Math.PI);var h=s.rotationY(this.gearP1.angle);this.gearP1.worldTransform=h.multiply(s.translation(this.gearP1.position)),this.gearP1.draw(t),this.gearP2.setAttributesToParent(this.gearP1,-.035),this.gearP2.worldTransform=h.multiply(s.translation(this.gearP2.position)),this.gearP2.draw(t),this.gearQ1.setAttributesByParent(this.gearP2,.75*Math.PI);var u=s.rotationY(this.gearQ1.angle);this.gearQ1.worldTransform=u.multiply(s.translation(this.gearQ1.position)),this.gearQ1.draw(t),this.callipicDial.position=this.gearQ1.position.add(new n(0,-.14,0)),this.callipicDial.worldTransform=u.multiply(s.translation(this.callipicDial.position)),this.callipicDial.draw(t),this.axleQ.position=this.gearQ1.position.add(new n(0,-.005,0)),this.axleQ.worldTransform=u.multiply(s.translation(this.axleQ.position)),this.axleQ.draw(t),this.gl.uniform4fv(t.vertColorLocation,[.45,.4,.7,.95]),this.gearE3.setAttributesByParent(this.gearM3,.85*Math.PI);var g=s.rotationY(this.gearE3.angle);this.gearE3.worldTransform=g.multiply(s.translation(this.gearE3.position)),this.gearE3.draw(t),this.gearE4.setAttributesToParent(this.gearE3,-.035),this.gearE4.worldTransform=g.multiply(s.translation(this.gearE4.position)),this.gearE4.draw(t),this.gearF1.setAttributesByParent(this.gearE4,.96*Math.PI);var c=s.rotationY(this.gearF1.angle);this.gearF1.worldTransform=c.multiply(s.translation(this.gearF1.position)),this.gearF1.draw(t),this.gearF2.setAttributesToParent(this.gearF1,-.035),this.gearF2.worldTransform=c.multiply(s.translation(this.gearF2.position)),this.gearF2.draw(t),this.gearG1.setAttributesByParent(this.gearF2,1.4*Math.PI);var f=s.rotationY(this.gearG1.angle);this.gearG1.worldTransform=f.multiply(s.translation(this.gearG1.position)),this.gearG1.draw(t),this.gearG2.setAttributesToParent(this.gearG1,-.035),this.gearG2.worldTransform=f.multiply(s.translation(this.gearG2.position)),this.gearG2.draw(t),this.sarosDial.position=this.gearG2.position.add(new n(0,-.07,0)),this.sarosDial.worldTransform=f.multiply(s.translation(this.sarosDial.position)),this.sarosDial.draw(t),this.axleG.position=this.gearG1.position.add(new n(0,-.005,0)),this.axleG.worldTransform=f.multiply(s.translation(this.axleG.position)),this.axleG.draw(t),this.gl.uniform4fv(t.vertColorLocation,[.65,.4,.7,.95]),this.gearH1.setAttributesByParent(this.gearG2,1.35*Math.PI);var p=s.rotationY(this.gearH1.angle);this.gearH1.worldTransform=p.multiply(s.translation(this.gearH1.position)),this.gearH1.draw(t),this.gearH2.setAttributesToParent(this.gearH1,-.035),this.gearH2.worldTransform=p.multiply(s.translation(this.gearH2.position)),this.gearH2.draw(t),this.gearI1.setAttributesByParent(this.gearH2,1.75*Math.PI);var d=s.rotationY(this.gearI1.angle);this.gearI1.worldTransform=d.multiply(s.translation(this.gearI1.position)),this.gearI1.draw(t),this.exigemosDial.position=this.gearI1.position.add(new n(0,-.035,0)),this.exigemosDial.worldTransform=d.multiply(s.translation(this.exigemosDial.position)),this.exigemosDial.draw(t),this.axleI.position=this.gearI1.position.add(new n(0,-.005,0)),this.axleI.worldTransform=d.multiply(s.translation(this.axleI.position)),this.axleI.draw(t),this.gl.uniform4fv(t.vertColorLocation,[.5,.75,.9,.95]),this.gearC1.setAttributesByParent(this.gearB2,1.1*Math.PI);var w=s.rotationY(this.gearC1.angle);this.gearC1.worldTransform=w.multiply(s.translation(this.gearC1.position)),this.gearC1.draw(t),this.gearC2.setAttributesToParent(this.gearC1,-.035),this.gearC2.worldTransform=w.multiply(s.translation(this.gearC2.position)),this.gearC2.draw(t),this.gearD1.setAttributesByParent(this.gearC2,.82*Math.PI);var y=s.rotationY(this.gearD1.angle);this.gearD1.worldTransform=y.multiply(s.translation(this.gearD1.position)),this.gearD1.draw(t),this.gearD2.setAttributesToParent(this.gearD1,-.1),this.gearD2.worldTransform=y.multiply(s.translation(this.gearD2.position)),this.gearD2.draw(t),this.axleD.position=this.gearD1.position.add(new n(0,-.005,0)),this.axleD.worldTransform=y.multiply(s.translation(this.axleD.position)),this.axleD.draw(t),this.gearE2.setAttributesByParent(this.gearD2,.152*Math.PI);var m=s.rotationY(this.gearE2.angle);this.gearE2.worldTransform=m.multiply(s.translation(this.gearE2.position)),this.gearE2.draw(t),this.gearE5.setAttributesToParent(this.gearE2,-.07),this.gearE5.worldTransform=m.multiply(s.translation(this.gearE5.position)),this.gearE5.draw(t),this.gearK1.setAttributesByParent(this.gearE5,this.gearE3.angle),this.gearK1.angle-=2*this.gearE3.angle;var v=s.rotationY(this.gearK1.angle);this.gearK1.worldTransform=v.multiply(s.translation(this.gearK1.position)),this.gearK1.draw(t),this.gl.uniform4fv(t.vertColorLocation,[.45,.8,.75,.95]);var T=2*Math.PI/60;this.gearK2.angle=this.gearK1.angle+T*Math.sin(this.gearK1.angle),this.gearK2.position=this.gearE5.position.add(new n(.27*Math.sin(this.gearE3.angle),-.035,.27*Math.cos(this.gearE3.angle)));var C=s.rotationY(this.gearK2.angle);this.gearK2.worldTransform=C.multiply(s.translation(this.gearK2.position)),this.gearK2.draw(t),this.gearE6.setAttributesByParent(this.gearK2,Math.PI+this.gearE3.angle);var b=s.rotationY(this.gearE6.angle);this.gearE6.worldTransform=b.multiply(s.translation(this.gearE6.position)),this.gearE6.draw(t),this.gearE1.setAttributesToParent(this.gearE6,.14),this.gearE1.worldTransform=b.multiply(s.translation(this.gearE1.position)),this.gearE1.draw(t),this.axleE.position=this.gearE1.position.add(new n(0,-.005,0)),this.axleE.worldTransform=b.multiply(s.translation(this.axleE.position)),this.axleE.draw(t),this.gearB3.setAttributesByParent(this.gearE1,Math.PI);var _=s.rotationY(this.gearB3.angle);this.gearB3.position=this.gearB2.position.add(new n(0,-.1,0)),this.gearB3.worldTransform=_.multiply(s.translation(this.gearB3.position)),this.gearB3.draw(t),this.moonDial.position=this.gearB3.position.add(new n(0,5*.035,0)),this.moonDial.worldTransform=_.multiply(s.translation(this.moonDial.position)),this.moonDial.draw(t),this.axleB.position=this.moonDial.position.add(new n(0,.005,0)),this.axleB.worldTransform=_.multiply(s.translation(this.axleB.position)),this.axleB.draw(t)}}]),i}(function(){function t(e){_classCallCheck(this,t),this.gl=e,this.camera=new o,this.camera.eye=new n(1,.45,0),this.camera.eye=new n(1e-4,1,0),this.camera.target=new n(0,0,0),this.light=new l}return _createClass(t,[{key:"draw",value:function(t,e){this.light.setRotatingPosition(e),this.camera.setRotatingPosition(e);var i=t.getUniformLocation("projection_matrix");this.gl.uniformMatrix4fv(i,!1,this.camera.projectionMatrix.el);var r=t.getUniformLocation("view_matrix");this.gl.uniformMatrix4fv(r,!1,this.camera.viewMatrix.el);var a=t.getUniformLocation("eye_position");this.gl.uniform3fv(a,this.camera.eye.el);var n=t.getUniformLocation("light_position");this.gl.uniform3fv(n,this.light.position.el)}}]),t}()),d=function(){function t(e){_classCallCheck(this,t),this.gl=e;var i=this.gl.createShader(this.gl.VERTEX_SHADER),r=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(i,"precision mediump float;\n\n            uniform mat4 world_matrix;\n            uniform mat4 view_matrix;\n            uniform mat4 projection_matrix;\n\n            attribute vec3 position;\n            attribute vec3 normal;\n            varying vec3 frag_normal;\n            varying vec3 world_position;\n\n            void main()\n            {\n                frag_normal = mat3(world_matrix) * normal;\n                world_position = (world_matrix * vec4(position, 1)).xyz;\n                gl_Position = projection_matrix * view_matrix * vec4(world_position, 1);\n            }"),this.gl.shaderSource(r,"precision mediump float;\n\n            uniform vec3 eye_position;\n            uniform vec3 light_position;\n            uniform vec4 vert_color;\n\n            varying vec3 frag_normal;\n            varying vec3 world_position;\n            void main()\n            {\n                vec3 light_direction = normalize(light_position - world_position);\n                vec3 view_direction = normalize(eye_position - world_position);\n                \n                vec3 diffuse = (vert_color.xyz * 0.25) + clamp(dot(frag_normal, light_direction), 0.0, 1.0) * (vert_color.xyz * 0.75);\n\n                gl_FragColor = vec4(diffuse, vert_color.w);\n            }"),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?(this.gl.compileShader(r),this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS)?(this.program=this.gl.createProgram(),this.gl.attachShader(this.program,i),this.gl.attachShader(this.program,r),this.gl.linkProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)?(this.gl.validateProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.VALIDATE_STATUS)?(this.worldMatrixLocation=this.getUniformLocation("world_matrix"),this.vertColorLocation=this.getUniformLocation("vert_color")):console.error("ERROR validating program!",this.gl.getProgramInfoLog(this.program))):console.error("ERROR linking program!",this.gl.getProgramInfoLog(this.program))):console.error("ERROR compiling fragment shader!",this.gl.getShaderInfoLog(r))):console.error("ERROR compiling vertex shader!",this.gl.getShaderInfoLog(i))}return _createClass(t,[{key:"use",value:function(){this.gl.useProgram(this.program)}},{key:"getAttribLocation",value:function(t){return this.gl.getAttribLocation(this.program,t)}},{key:"getUniformLocation",value:function(t){return this.gl.getUniformLocation(this.program,t)}}]),t}(),w=i("fXoL"),y=["surface"];function m(t,e){1&t&&(w.Hb(0,"p"),w.Vb(1,"Your browser does not support HTML5"),w.Gb())}var v,T,C,b,_,M=((v=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"setScene",value:function(t,e){e||(this.glNotSupported=!0),this.gl=e,this.scene=t,this.scene.camera.aspect=this.surface.nativeElement.width/this.surface.nativeElement.height,this.program=new d(this.gl),this.program.use(),this.gl.enable(this.gl.DEPTH_TEST),this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),requestAnimationFrame(this.render.bind(this))}},{key:"render",value:function(t){var e=t.valueOf()/1e3;this.gl.clearColor(.5,.85,.8,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.program.use(),this.scene.draw(this.program,e),this.gl.useProgram(null),requestAnimationFrame(this.render.bind(this))}}]),t}()).\u0275fac=function(t){return new(t||v)},v.\u0275cmp=w.yb({type:v,selectors:[["app-canvas"]],viewQuery:function(t,e){var i;1&t&&w.Tb(y,!0),2&t&&w.Qb(i=w.Ob())&&(e.surface=i.first)},decls:4,vars:1,consts:[[4,"ngIf"],["width","1024","height","768"],["surface",""]],template:function(t,e){1&t&&(w.Ub(0,m,2,0,"p",0),w.Hb(1,"canvas",1,2),w.Vb(3," Your browser does not support HTML5\n"),w.Gb()),2&t&&w.Pb("ngIf",e.glNotSupported)},directives:[r.h],encapsulation:2}),v),P=[{path:"",component:(T=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this.appCanvas.surface.nativeElement.getContext("webgl");if(t){var e=new p(t);this.appCanvas.setScene(e,t)}}}]),t}(),T.\u0275fac=function(t){return new(t||T)},T.\u0275cmp=w.yb({type:T,selectors:[["antikythera-component"]],viewQuery:function(t,e){var i;1&t&&w.Tb(M,!0),2&t&&w.Qb(i=w.Ob())&&(e.appCanvas=i.first)},decls:2,vars:0,consts:[[2,"text-align","center"]],template:function(t,e){1&t&&(w.Hb(0,"div",0),w.Fb(1,"app-canvas"),w.Gb())},directives:[M],encapsulation:2}),T)}],x=((_=function t(){_classCallCheck(this,t)}).\u0275mod=w.Cb({type:_}),_.\u0275inj=w.Bb({factory:function(t){return new(t||_)},imports:[[a.a.forChild(P)],a.a]}),_),A=((b=function t(){_classCallCheck(this,t)}).\u0275mod=w.Cb({type:b}),b.\u0275inj=w.Bb({factory:function(t){return new(t||b)},providers:[],imports:[[r.b]]}),b),k=((C=function t(){_classCallCheck(this,t)}).\u0275mod=w.Cb({type:C}),C.\u0275inj=w.Bb({factory:function(t){return new(t||C)},imports:[[r.b,x,A]]}),C)}}]);