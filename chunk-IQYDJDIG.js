import{a as y,b as O,c,d as R,e as S,f as kt,g as Ne,h as Ft,i as Pt,j as xt,k as Vt,l as Bt}from"./chunk-6QE7D2MS.js";import{$ as d,Aa as Rt,B as v,Ba as Te,C as re,Ca as At,D as j,E as B,F as N,G as Ze,Ga as It,H as Qe,I as ae,Ia as Ke,J as le,K as G,L as $,N as g,O as f,P as yt,S as ce,T as ve,U,V as W,W as qe,X as w,Y as de,Z as ye,_ as p,a as T,aa as J,b as P,ba as D,ca as ue,d as ut,da as Dt,e as I,ea as St,f as ht,fa as De,g as pt,ga as Se,h as We,ha as we,i as ne,ia as _,j as ft,ja as z,k as F,ka as Y,l as _t,la as wt,m as se,ma as Ct,n as gt,na as Et,o as be,oa as Mt,p as oe,pa as K,q as mt,qa as Je,r as bt,s as E,sa as Tt,t as vt,ta as Nt,u as ze,ua as Ce,va as Ot,w as q,wa as Ee,x as H,xa as Ye,y as x,ya as Me,z as V}from"./chunk-VDP5YKTC.js";var Oe=class{constructor(){this.data=new Map;for(let t=0;t<=99;t++)this.data.set(t,0);this.tapeNumber=1,this.shiftPosition=0}get(t){let e=this.data.get(t);if(e===void 0)throw Error("ERROR invalid address "+t);return e}add(t,e){let i=this.get(t)+e;this.shiftPosition!==0&&(i*=10**this.shiftPosition,this.shiftPosition=0);let s=Math.trunc(i);if(this.data.set(t,s),t==9){let o=Math.round(Math.abs(i*1e8)%1e8);this.data.set(8,o)}}subtract(t,e){let i=this.get(t)-e;this.shiftPosition!==0&&(i*=10**this.shiftPosition,this.shiftPosition=0);let s=Math.trunc(i);if(this.data.set(t,s),t==9){let o=Math.round(Math.abs(i*1e8)%1e8);this.data.set(8,o)}}multiply(t,e){let i=this.get(t)*this.get(e),s=Math.abs(i*10)%1e7,o=Math.trunc(i/1e7);this.data.set(8,s),this.data.set(9,o),this.clear(e)}divide(t,e){let i=this.get(t)/1e7,s=Math.trunc(this.get(9)/i),o=Math.trunc(this.get(9)%i);this.data.set(e,s),this.data.set(9,o)}clear(t){this.data.set(t,0),t==9&&this.data.set(8,0)}};var u=class n{static getOperation(t){return Math.trunc(n.getOrderCode(t)/1e4)}static getAddressA(t){return Math.trunc(n.getOrderCode(t)/100)%100}static getAddressB(t){return n.getOrderCode(t)%100}static getOrderCode(t){return Math.trunc(t/1e3)}};var he=class{constructor(t,e){this.entries=t,this.blockEntryIndices=e,this.index=0;for(let[i,s]of e)if(s===this.index){this.blockNumber=i;break}}searchBlock(t){let e=this.blockEntryIndices.get(t);if(e!==void 0)this.index=e,this.blockNumber=t;else throw new Error("Block "+t+" not found on tape after full loop")}read(){let t=this.peek();return this.index++,this.index>=this.entries.length&&(this.index=0),t}peek(){if(this.entries.length===0)throw new Error("No entry on tape to read.");return this.entries[this.index]}peekAhead(){return this.index===this.entries.length-1?this.peekAt(0):this.peekAt(this.index+1)}peekAt(t){if(this.entries.length===0)throw new Error("No entry on tape to read.");return this.entries[t]}};var X=class{static assemble(t){let e=new Map;var i=0,s=1,o=[],r=new Map;return t.split(`
`).forEach(a=>{if(i++,!(a.startsWith(";")||a.length===0))if(a.startsWith("#")){let l=Number(a.substr(1));if(isNaN(l))throw Error('Expected block number, got "'+a+'" on line '+i+".");r.set(l,o.length)}else if(a.startsWith("[")&&a.endsWith("]")){let l=Number(a.substr(1,a.length-2));if(isNaN(l))throw Error('Expected block number, got "'+a+'" on line '+i+".");r.set(l,o.length)}else if(a.startsWith("Block ")){let l=Number(a.substr(6));if(isNaN(l))throw Error('Expected block number, got "'+a+'" on line '+i+".");r.set(l,o.length)}else if(a=="==tape"||a.startsWith("PTR"))o.length!==0&&(e.set(s,new he(o,r)),s++,o=[],r=new Map);else if(a.length===5){let l=Number(a)*1e3;if(isNaN(l))throw Error('Expected number, got "'+a+'" on line '+i+".");o.push(l)}else if(a.length===9){let l=Number(a);if(a.includes(".")&&(l=l*1e7),isNaN(l))throw Error('Expected number, got "'+a+'" on line '+i+".");o.push(l)}else throw Error('Unexpected entry "'+a+'" on line '+i+".")}),e.set(s,new he(o,r)),e}};var Re=class{constructor(){this.tapes=new Map,this.state=new Oe,this.output=[""]}setProgram(t){this.tapes=X.assemble(t)}get currentTape(){return this.getTape(this.state.tapeNumber)}get currentBlockNumber(){return this.currentTape.blockNumber}peekNextEntry(){return this.state.tapeNumber>7?this.state.get(this.state.tapeNumber):this.currentTape.peek()}readNextEntry(){if(this.state.tapeNumber>7){let t=this.state.get(this.state.tapeNumber);return this.state.tapeNumber++,t}return this.currentTape.read()}step(){if(this.state.finished)return;let t=this.readNextEntry(),e=u.getOperation(t),i=u.getAddressA(t),s=u.getAddressB(t);switch(e){case 0:this.control(i,s);break;case 1:this.add(i,s);break;case 2:this.addAndClear(i,s);break;case 3:this.subtract(i,s);break;case 4:this.subtractAndClear(i,s);break;case 5:this.multiply(i,s);break;case 6:this.divide(i,s);break;case 7:this.transferPositiveModulus(i,s);break;default:throw new Error("Unknown order "+u.getOrderCode(t))}}control(t,e){if(t>=30&&t<=39){let i=t%10;this.searchBlock(i,e);return}if(t>=50&&t<=59){if(this.state.yes){let i=t%10;this.searchBlock(i,e)}return}if(t>=70&&t<=79){let i=t%10;this.state.printLayout=i;return}if(t>=81&&t<=89){this.state.shiftPosition=-(t%10)+2;return}if(t===1&&e===0){this.finish();return}switch(t){case 11:this.testPositive(e);return;case 12:this.testNegative(e);return;case 21:this.transferControl(e);return;case 22:this.state.yes&&this.transferControl(e);return}throw new Error("Unknown control instruction 0"+t+e)}add(t,e){let i=this.read(t);if(e===1){this.print(i);return}this.state.add(e,i)}addAndClear(t,e){this.add(t,e),this.state.clear(t)}subtract(t,e){let i=this.read(t);if(e===1){this.print(i);return}this.state.subtract(e,i)}subtractAndClear(t,e){this.subtract(t,e),this.state.clear(t)}multiply(t,e){this.state.multiply(t,e)}divide(t,e){this.state.divide(t,e)}transferPositiveModulus(t,e){this.peek(t)<0?this.subtract(t,e):this.add(t,e)}testPositive(t){this.state.yes=this.read(t)>0}testNegative(t){this.state.yes=this.read(t)<0}searchBlock(t,e){this.getTape(e).searchBlock(t)}transferControl(t){this.state.tapeNumber=t}finish(){this.state.finished=!0}print(t){let i=(t<0?"":"+")+(t/1e7).toFixed(7);switch(this.state.printLayout){case 0:this.output.push("","","","","");break;case 3:this.output[this.output.length-1]+=i+"   ";break;case 4:this.output[this.output.length-1]+=i,this.output.push("");break}}peek(t){return t>0&&t<8?this.getTape(t).peekAt(t):this.state.get(t)}peekAhead(t){return t>0&&t<8?this.getTape(t).peekAhead():this.peek(t)}read(t){return t>0&&t<8?this.getTape(t).read():this.state.get(t)}getTape(t){let e=this.tapes.get(t);if(!e)throw Error("ERROR invalid tape "+t);return e}};var ee=(()=>{class n extends S{static{this.activeRegisterColor=[1,1,1,1]}static{this.passiveRegisterColor=[.2,.2,.2,1]}static{this.passiveStoreColor=[0,.2,0,1]}static{this.activeStoreColor=[0,1,0,1]}static{this.passiveReadColor=[.2,0,0,1]}static{this.activeReadColor=[1,0,0,1]}constructor(e,i,s){super(s),this.statusFlag=!1,this.activeColorValue=n.activeRegisterColor,this.passiveColorValue=n.passiveRegisterColor,this.meshes=[e],this.color=this.passiveColor,this.program=s.emitterShader,this.position=i}get status(){return this.statusFlag}set status(e){this.statusFlag=e,this.color=this.statusFlag?this.activeColorValue:this.passiveColorValue}get activeColor(){return this.activeColorValue}set activeColor(e){this.activeColorValue=e,this.statusFlag&&(this.color=this.activeColorValue)}get passiveColor(){return this.passiveColorValue}set passiveColor(e){this.passiveColorValue=e,this.statusFlag||(this.color=this.passiveColorValue)}}return n})();var L=(()=>{class n extends S{static{this.activeColor=[1,.2,.2,1]}static{this.passiveColor=[.6,.12,.12,1]}constructor(e,i,s){super(i),this.centerPosition=s.copy(),this.meshes=[e],this.color=n.passiveColor,this.program=i.emitterShader}get digit(){return this.currentDigit}set digit(e){if(this.currentDigit===e)return;this.currentDigit=e;let i=e*(2*Math.PI/10);this.worldTransform=y.rotationX(Math.PI/2).multiply(y.translation(new c(0,.0095,0))).multiply(y.rotationZ(i)).multiply(y.translation(this.centerPosition))}}return n})();var Z=class{constructor(t){this.isActive=!1,this.indicators=t,this.hasSignDigit=t.length===9}set value(t){if(this.currentValue!==t)if(t==null?(this.setActive(!1),t=0):this.setActive(!0),this.currentValue=t,this.hasSignDigit){this.indicators[0].digit=this.getSignDigit();for(let e=0;e<8;e++)this.indicators[e+1].digit=this.getDigit(e)}else for(let e=0;e<8;e++)this.indicators[e].digit=this.getDigit(e)}getSignDigit(){return this.currentValue>=0?0:9}getDigit(t){return Math.trunc(Math.abs(this.currentValue)/10**(7-t))%10}setActive(t){if(this.isActive!==t){this.isActive=t;for(let e of this.indicators)e.color=t?L.activeColor:L.passiveColor}}};var A=(()=>{class n extends R{static{this.tubeDistance=.0425}static{this.tubeRadius=.015}static{this.tubeHeight=.05}static{this.memoryRegisterMiddleGap=.1}static createTube(e,i){let o=2*Math.PI/10,r=[],a=0;for(let l=0;l<10;l++){let h=new c(e*Math.cos(a),0,e*Math.sin(a)),m=new c(e*Math.cos(a),-i,e*Math.sin(a)),b=new c(0,-i,0),C=c.zero;a+=o;let M=new c(e*Math.cos(a),0,e*Math.sin(a)),k=new c(e*Math.cos(a),-i,e*Math.sin(a));this.pushTriangle(r,h,C,M),this.pushTriangle(r,b,m,k),this.pushTriangle(r,h,M,m),this.pushTriangle(r,m,M,k)}return r}static createTubeRow(e){let i=[],s=this.createTube(this.tubeRadius,this.tubeHeight),o=new c(-.23,0,e);for(let r=0;r<5;r++)this.appendWithOffset(i,s,o),o.x+=this.tubeDistance;o.x+=this.memoryRegisterMiddleGap;for(let r=0;r<4;r++)this.appendWithOffset(i,s,o),o.x+=this.tubeDistance;return i}static createAccumulatorTubeRow(){let e=[],i=this.createTube(this.tubeRadius,this.tubeHeight),s=new c(-.15,0,.1);for(let o=0;o<8;o++)this.appendWithOffset(e,i,s),s.x+=this.tubeDistance;return e}static createMemoryUnit(){let e=[];for(let i=0;i<5;i++){let s=this.createTubeRow(-.22+i*this.tubeDistance);this.append(e,s)}for(let i=5;i<10;i++){let s=this.createTubeRow(-.165+i*this.tubeDistance);this.append(e,s)}return e}static createAccumulator(){return this.createAccumulatorTubeRow()}}return n})();var Ae=class extends S{constructor(t,e,i,s,o,r){super(r),this.position=o;let a=S.withMesh(t,r);a.color=[.5,.5,.5,1],a.worldTransform=y.rotationX(Math.PI/2).multiply(y.translation(o));let l=S.withMesh(new O(R.createBox(new c(.25,.25,.1)),this.gl),r);l.color=[.5,.5,.5,1],l.worldTransform=y.translation(o.add(new c(0,0,-.15)));let h=S.withMesh(e,r);h.color=[.2,.2,.2,1],h.worldTransform=y.rotationX(Math.PI/2).multiply(y.translation(o));let m=S.withMesh(new O(R.createBox(new c(.05,.035,.02)),this.gl),r);m.color=[.2,.2,.2,1],m.worldTransform=y.translation(o.add(new c(.01,0,0))),this.children=[a,l,h,m],this.registers=this.createRegisters(i,r),this.storeStatusLight=this.createStoreStatusLight(s,r),this.readStatusLight=this.createReadStatusLight(s,r),this.statusLights=this.createStatusLights(s,r)}createStoreStatusLight(t,e){let i=this.createStatusLight(this.position.add(new c(-.02,.015,.02)),t,e);return i.activeColor=ee.activeStoreColor,i.passiveColor=ee.passiveStoreColor,i}createReadStatusLight(t,e){let i=this.createStatusLight(this.position.add(new c(.04,.015,.02)),t,e);return i.activeColor=ee.activeReadColor,i.passiveColor=ee.passiveReadColor,i}createStatusLights(t,e){return[this.createStatusLight(this.position.add(new c(0,.015,.02)),t,e),this.createStatusLight(this.position.add(new c(.02,.015,.02)),t,e),this.createStatusLight(this.position.add(new c(-.02,0,.02)),t,e),this.createStatusLight(this.position.add(new c(0,0,.02)),t,e),this.createStatusLight(this.position.add(new c(.02,0,.02)),t,e),this.createStatusLight(this.position.add(new c(.04,0,.02)),t,e),this.createStatusLight(this.position.add(new c(-.02,-.015,.02)),t,e),this.createStatusLight(this.position.add(new c(0,-.015,.02)),t,e),this.createStatusLight(this.position.add(new c(.02,-.015,.02)),t,e),this.createStatusLight(this.position.add(new c(.04,-.015,.02)),t,e)]}createStatusLight(t,e,i){return new ee(e,t,i)}createRegisters(t,e){let i=[],s=this.position.add(new c(-.23,-.2175,0));for(let o=0;o<5;o++){let r=this.createIndicators(t,e,s);i[o]=new Z(r),s=s.add(new c(0,A.tubeDistance,0))}s=s.add(new c(0,.055,0));for(let o=5;o<10;o++){let r=this.createIndicators(t,e,s);i[o]=new Z(r),s=s.add(new c(0,A.tubeDistance,0))}return i}createIndicators(t,e,i){let s=[],o=i.copy();for(let r=0;r<5;r++)s[r]=new L(t,e,o),o.x+=A.tubeDistance;o.x+=A.memoryRegisterMiddleGap;for(let r=5;r<9;r++)s[r]=new L(t,e,o),o.x+=A.tubeDistance;return s}draw(){this.children?.forEach(t=>{t.draw()}),this.renderingContext.emitterShader.use(),this.registers.forEach(t=>{for(let e of t.indicators)e.draw()}),this.storeStatusLight.draw(),this.readStatusLight.draw(),this.statusLights.forEach(t=>{t.draw()}),this.renderingContext.standardShader.use()}};var Ie=class{constructor(t){this.processor=t}disassemble(t){return(t/1e3).toString().padStart(5,"0")+" "+this.disassembleInstruction(t)}disassembleInstruction(t){switch(u.getOperation(t)){case 0:return this.disassembleControl(t);case 1:return this.disassembleAdd(t);case 2:return this.disassembleAddAndClear(t);case 3:return this.disassembleSubtract(t);case 4:return this.disassembleSubtractAndClear(t);case 5:return this.disassembleMultiply(t);case 6:return this.disassembleDivide(t);case 7:return this.disassembleTransferPositiveModulus(t);default:throw new Error("Unknown order "+u.getOrderCode(t))}}disassembleControl(t){let e=u.getAddressA(t),i=u.getAddressB(t);if(e>=30&&e<=39)return"SEARCH for block "+e%10+" on tape "+i;if(e>=50&&e<=59)return"CONDITIONAL SEARCH for block "+e%10+" on tape "+i+" ("+(this.processor.state.yes?"YES":"NO")+")";if(e>=70&&e<=79)return"PRINT LAYOUT "+e%10;if(e>=81&&e<=89){let s=-(e%10)+2;return"SELECT SHIFT POSITION "+String.fromCharCode(65-s+1)+" (10^"+s+")"}if(e===1&&i===0)return"FINISH";switch(e){case 11:return"TEST POSITIVE ["+i+"] ("+this.format(this.processor.peek(i))+")";case 12:return"TEST NEGATIVE ["+i+"] ("+this.format(this.processor.peek(i))+")";case 21:return"TRANSFER to "+(i<10?"tape ":"")+i;case 22:return"CONDITIONAL TRANSFER to "+i+" ("+(this.processor.state.yes?"YES":"NO")+")";case 85:return"SHIFT";default:throw new Error("Unknown control order "+u.getOrderCode(t))}}disassembleAdd(t){let e=u.getAddressA(t),i=u.getAddressB(t),s=this.processor.peekAhead(e),o=this.format(s);if(i===1)return"PRINT ["+e+"] ("+o+")";let r=this.processor.peek(i),a=this.format(r),l=this.format(r+s);return"["+i+"] += ["+e+"] ("+a+" + "+o+" = "+l+")"}disassembleAddAndClear(t){let e=u.getAddressA(t),i=u.getAddressB(t),s=this.processor.peekAhead(e),o=this.format(s);if(i===0)return"CLEAR ["+e+"] ("+o+")";if(i===1)return"PRINT ["+e+"] ("+o+")";let r=this.processor.peek(i),a=this.format(r),l=this.format(r+s);return"["+i+"] += ["+e+"]; CLEAR ["+e+"] ("+a+" + "+o+" = "+l+")"}disassembleSubtract(t){let e=u.getAddressA(t),i=u.getAddressB(t),s=this.processor.peekAhead(e),o=this.format(s);if(i===0)return"CLEAR ["+e+"] ("+o+")";if(i===1)return"PRINT ["+e+"] ("+o+")";let r=this.processor.peek(i),a=this.format(r),l=this.format(r-s);return"["+i+"] -= ["+e+"]; CLEAR ["+e+"] ("+a+" - "+o+" = "+l+")"}disassembleSubtractAndClear(t){let e=u.getAddressA(t),i=u.getAddressB(t),s=this.processor.peekAhead(e),o=this.processor.peek(i),r=this.format(o),a=this.format(s),l=this.format(o-s);return"["+i+"] -= ["+e+"] ("+r+" - "+a+" = "+l+")"}disassembleMultiply(t){let e=u.getAddressA(t),i=u.getAddressB(t),s=this.processor.peek(e),o=this.processor.peek(i),r=this.format(o),a=this.format(o),l=this.format(s*o/1e7);return"[09] = ["+e+"] * ["+i+"] ("+r+" * "+a+" = "+l+")"}disassembleDivide(t){let e=u.getAddressA(t),i=u.getAddressB(t),s=this.processor.peek(9),o=this.processor.peek(e),r=this.format(s),a=this.format(o),l=this.format(s/o*1e7),h=this.format(s%o);return"["+i+"] = [09] / ["+e+"] ("+r+" / "+a+" = "+l+"); [09] = [09] % ["+e+"] ("+r+" % "+a+" = "+h+")"}disassembleTransferPositiveModulus(t){let e=u.getAddressA(t);return this.processor.peek(e)<0?"TRANSFER POSITIVE MODULUS: "+this.disassembleSubtract(t):"TRANSFER POSITIVE MODULUS: "+this.disassembleAdd(t)}format(t){return t>=1&&t<=9?"0.000000"+t:t>=-9&&t<=-1?"-0.000000"+-t:(t/1e7).toString()}};var pe=class{constructor(t,e,i){this.id=t,this.title=e,this.text=i}};var ke=class{static get programList(){return[new pe("1","Example program 1",`
[1]
20900
21000
22000
23000
24000
25000
10110
+10000000
10120
+01000000
10130
+15500000
03202
02102

==tape
[2]
11040
51040
07300
11001
07400
10901
12010
13040
31040
01140
24000
20900
05202
00100`),new pe("2","Example program 2",`
[1]
20900
21000
22000
23000
24000
25000
10110
+05000000
10120
+90000000
10130
+10000000
10140
+20000000
11050
03202
02102

==tape
[2]
07400
11001
33020
01220
05303
02203
25009
64050
20900
15010
03202

==tape
[3]
00100`)]}};var Fe=class extends S{constructor(t,e,i,s,o){super(o),this.position=s;let r=S.withMesh(t,o);r.color=[.5,.5,.5,1],r.worldTransform=y.rotationX(Math.PI/2).multiply(y.translation(s));let a=S.withMesh(new O(R.createBox(new c(.25,.25,.1)),this.gl),o);a.color=[.5,.5,.5,1],a.worldTransform=y.translation(s.add(new c(0,0,-.15)));let l=S.withMesh(e,o);l.color=[.2,.2,.2,1],l.worldTransform=y.rotationX(Math.PI/2).multiply(y.translation(s)),this.children=[r,a,l],this.register=this.createRegister(i,o)}createRegister(t,e){let i=this.position.add(new c(-.15,-.1,0)),s=this.createIndicators(t,e,i);return new Z(s)}createIndicators(t,e,i){let s=[],o=i.copy();for(let r=0;r<8;r++)s[r]=new L(t,e,o),o.x+=A.tubeDistance;return s}draw(){this.children?.forEach(t=>{t.draw()}),this.renderingContext.emitterShader.use();for(let t of this.register.indicators)t.draw();this.renderingContext.standardShader.use()}};var Pe=class extends kt{constructor(t){super(t),this.isSingleStepping=!0,this.isSingleStepDone=!0,this.isInErrorState=!1,this.programList=ke.programList,this.processor=new Re,this.disassembler=new Ie(this.processor);let e=new O(R.createCase(new c(.25,.05,.25)),t.gl),i=new O(A.createMemoryUnit(),t.gl),s=new O(R.createBox(new c(.0025,.003,.0036)),t.gl),o=new O(R.createBox(new c(.003,.003,.0036)),t.gl),r=new O(A.createAccumulator(),t.gl),a=this.createMemoryUnitNode(e,i,s,o,new c(-.5,-.5,0)),l=this.createMemoryUnitNode(e,i,s,o,new c(-.5,0,0)),h=this.createMemoryUnitNode(e,i,s,o,new c(-.5,.5,0)),m=this.createMemoryUnitNode(e,i,s,o,new c(-.5,1,0)),b=this.createMemoryUnitNode(e,i,s,o,new c(-1,-.5,0)),C=this.createMemoryUnitNode(e,i,s,o,new c(-1,0,0)),M=this.createMemoryUnitNode(e,i,s,o,new c(-1,.5,0)),k=this.createMemoryUnitNode(e,i,s,o,new c(-1,1,0)),vi=this.createMemoryUnitNode(e,i,s,o,new c(-1.5,1,0));this.accumulator8=this.createAccumulatorNode(e,r,s,new c(0,-.35,0)),this.accumulator9=this.createAccumulatorNode(e,r,s,new c(0,.5,0)),this.memoryBanks=[a,l,h,m,b,C,M,k,vi],this.nodes=[...this.memoryBanks,this.accumulator8,this.accumulator9],this.light.position=new c(.5,2,.5),this.camera.eye=new c(0,.5,3.3),this.camera.target=new c(0,.25,0),this.clearColor=[.1,.1,.1,1],this.camera.orthoScaling=2.7,this.loadFirstProgram()}createMemoryUnitNode(t,e,i,s,o){return new Ae(t,e,i,s,o,this.renderingContext)}createAccumulatorNode(t,e,i,s){return new Fe(t,e,i,s,this.renderingContext)}onProgramChange(t){this.selectedProgram=t,this.resetProgram()}loadFirstProgram(){this.onProgramChange(this.programList[0].id)}resetProgram(){this.processor.setProgram(this.findSelectedProgram().text),this.processor.output=[""],this.isSingleStepping=!0,this.isSingleStepDone=!0,this.isInErrorState=!1,this.errorText=void 0,this.processor.state.finished=!1,this.processor.state.tapeNumber=1,this.processor.state.shiftPosition=0,this.setIndicatorsPassive(),this.disassembleNextInstruction()}findSelectedProgram(){let t=this.programList.find(e=>e.id===this.selectedProgram);if(!t)throw Error("Could not get selected program.");return t}draw(t){super.draw(t);try{this.isInErrorState||this.runProcessorForFrame()}catch(e){console.error(e),this.errorText=e.message,this.isInErrorState=!0}this.copyStateToRenderObject(),this.renderingContext.standardShader.use(),this.nodes.forEach(e=>{e.draw()})}stepProcessor(){this.isSingleStepping=!0,this.isSingleStepDone=!1}runProcessor(){this.isSingleStepping=!this.isSingleStepping}runProcessorForFrame(){this.isSingleStepping?this.isSingleStepDone||(this.processor.step(),this.disassembleNextInstruction(),this.isSingleStepDone=!0):(this.processor.step(),this.disassembleNextInstruction()),this.processor.state.finished&&(this.isSingleStepping=!0)}copyStateToRenderObject(){let t=this.processor.peekNextEntry(),e=u.getOperation(t),i=u.getAddressA(t),s=u.getAddressB(t),o=e!==0,r=e===2||e===4;this.accumulator8.register.value=this.processor.peek(8),this.accumulator9.register.value=this.processor.peek(9);for(let a=0;a<9;a++){let l=this.memoryBanks[a],h=!1,m=!1;for(let b=0;b<10;b++){let C=l.registers[b],M=(a+1)*10+b;C.value=this.processor.peek(M);let k=!1;o&&(M==i&&(h=!0,k=!0,r&&(m=!0,k=!0)),M==s&&(m=!0,k=!0)),l.statusLights[b].status=k}l.readStatusLight.status=h,l.storeStatusLight.status=m}}setIndicatorsPassive(){for(let t=0;t<9;t++){let e=this.memoryBanks[t];for(let i=0;i<10;i++){let s=e.registers[i];(s.value===0||s.value===void 0)&&(s.value=null)}}}disassembleNextInstruction(){var t;this.processor.state.tapeNumber>7?t=this.processor.state.get(this.processor.state.tapeNumber):t=this.processor.currentTape.peek(),this.nextInstructionText=this.processor.state.finished?"(finished)":this.disassembler.disassemble(t),console.log(this.nextInstructionText)}};var Zt=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(i){return new(i||n)(f(ce),f(G))}}static{this.\u0275dir=N({type:n})}}return n})(),nt=(()=>{class n extends Zt{static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=ae(n)))(s||n)}})()}static{this.\u0275dir=N({type:n,features:[U]})}}return n})(),Ge=new V("");var yi={provide:Ge,useExisting:q(()=>Ue),multi:!0};function Di(){let n=Ye()?Ye().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Si=new V(""),Ue=(()=>{class n extends Zt{constructor(e,i,s){super(e,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Di())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(i){return new(i||n)(f(ce),f(G),f(Si,8))}}static{this.\u0275dir=N({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&D("input",function(r){return s._handleInput(r.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(r){return s._compositionEnd(r.target.value)})},features:[K([yi]),U]})}}return n})();var wi=new V(""),Ci=new V("");function Qt(n){return n!=null}function qt(n){return Tt(n)?pt(n):n}function Jt(n){let t={};return n.forEach(e=>{t=e!=null?T(T({},t),e):t}),Object.keys(t).length===0?null:t}function Yt(n,t){return t.map(e=>e(n))}function Ei(n){return!n.validate}function Kt(n){return n.map(t=>Ei(t)?t:e=>t.validate(e))}function Mi(n){if(!n)return null;let t=n.filter(Qt);return t.length==0?null:function(e){return Jt(Yt(e,t))}}function Xt(n){return n!=null?Mi(Kt(n)):null}function Ti(n){if(!n)return null;let t=n.filter(Qt);return t.length==0?null:function(e){let i=Yt(e,t).map(qt);return ft(i).pipe(ne(Jt))}}function ei(n){return n!=null?Ti(Kt(n)):null}function Gt(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Ni(n){return n._rawValidators}function Oi(n){return n._rawAsyncValidators}function Xe(n){return n?Array.isArray(n)?n:[n]:[]}function Ve(n,t){return Array.isArray(n)?n.includes(t):n===t}function Ut(n,t){let e=Xe(t);return Xe(n).forEach(s=>{Ve(e,s)||e.push(s)}),e}function Lt(n,t){return Xe(t).filter(e=>!Ve(n,e))}var Be=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Xt(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=ei(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},et=class extends Be{get formDirective(){return null}get path(){return null}},ge=class extends Be{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},tt=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},Ri={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},js=P(T({},Ri),{"[class.ng-submitted]":"isSubmitted"}),ti=(()=>{class n extends tt{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)(f(ge,2))}}static{this.\u0275dir=N({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&de("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[U]})}}return n})();var fe="VALID",xe="INVALID",te="PENDING",_e="DISABLED";function Ai(n){return(Le(n)?n.validators:n)||null}function Ii(n){return Array.isArray(n)?Xt(n):n||null}function ki(n,t){return(Le(t)?t.asyncValidators:n)||null}function Fi(n){return Array.isArray(n)?ei(n):n||null}function Le(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var it=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===fe}get invalid(){return this.status===xe}get pending(){return this.status==te}get disabled(){return this.status===_e}get enabled(){return this.status!==_e}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Ut(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Ut(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Lt(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Lt(t,this._rawAsyncValidators))}hasValidator(t){return Ve(this._rawValidators,t)}hasAsyncValidator(t){return Ve(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=te,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=_e,this.errors=null,this._forEachChild(i=>{i.disable(P(T({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(P(T({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=fe,this._forEachChild(i=>{i.enable(P(T({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(P(T({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===fe||this.status===te)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_e:fe}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=te,this._hasOwnPendingAsyncValidator=!0;let e=qt(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,s)=>i&&i._find(s),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new $,this.statusChanges=new $}_calculateStatus(){return this._allControlsDisabled()?_e:this.errors?xe:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(te)?te:this._anyControlsHaveStatus(xe)?xe:fe}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Le(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=Ii(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Fi(this._rawAsyncValidators)}};var ii=new V("CallSetDisabledState",{providedIn:"root",factory:()=>st}),st="always";function Pi(n,t){return[...t.path,n]}function xi(n,t,e=st){Bi(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),Gi(n,t),Li(n,t),Ui(n,t),Vi(n,t)}function Ht(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Vi(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function Bi(n,t){let e=Ni(n);t.validator!==null?n.setValidators(Gt(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=Oi(n);t.asyncValidator!==null?n.setAsyncValidators(Gt(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let s=()=>n.updateValueAndValidity();Ht(t._rawValidators,s),Ht(t._rawAsyncValidators,s)}function Gi(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&ni(n,t)})}function Ui(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&ni(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function ni(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Li(n,t){let e=(i,s)=>{t.valueAccessor.writeValue(i),s&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function Hi(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function ji(n){return Object.getPrototypeOf(n.constructor)===nt}function $i(n,t){if(!t)return null;Array.isArray(t);let e,i,s;return t.forEach(o=>{o.constructor===Ue?e=o:ji(o)?i=o:s=o}),s||i||e||null}function jt(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function $t(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Wi=class extends it{constructor(t=null,e,i){super(Ai(e),ki(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Le(e)&&(e.nonNullable||e.initialValueIsDefault)&&($t(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){jt(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){jt(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){$t(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var zi={provide:ge,useExisting:q(()=>ot)},Wt=Promise.resolve(),ot=(()=>{class n extends ge{constructor(e,i,s,o,r,a){super(),this._changeDetectorRef=r,this.callSetDisabledState=a,this.control=new Wi,this._registered=!1,this.name="",this.update=new $,this._parent=e,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=$i(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Hi(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){xi(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){Wt.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,s=i!==0&&Ot(i);Wt.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?Pi(e,this._parent):[e]}static{this.\u0275fac=function(i){return new(i||n)(f(et,9),f(wi,10),f(Ci,10),f(Ge,10),f(Ce,8),f(ii,8))}}static{this.\u0275dir=N({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[re.None,"disabled","isDisabled"],model:[re.None,"ngModel","model"],options:[re.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[K([zi]),U,Qe]})}}return n})();var Zi={provide:Ge,useExisting:q(()=>oi),multi:!0};function si(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function Qi(n){return n.split(":")[0]}var oi=(()=>{class n extends nt{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let i=this._getOptionId(e),s=si(i,e);this.setProperty("value",s)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=Qi(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=ae(n)))(s||n)}})()}static{this.\u0275dir=N({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,s){i&1&&D("change",function(r){return s.onChange(r.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[K([Zi]),U]})}}return n})(),ri=(()=>{class n{constructor(e,i,s){this._element=e,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(si(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(f(G),f(ce),f(oi,9))}}static{this.\u0275dir=N({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),qi={provide:Ge,useExisting:q(()=>ai),multi:!0};function zt(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function Ji(n){return n.split(":")[0]}var ai=(()=>{class n extends nt{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let i;if(Array.isArray(e)){let s=e.map(o=>this._getOptionId(o));i=(o,r)=>{o._setSelected(s.indexOf(r.toString())>-1)}}else i=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let s=[],o=i.selectedOptions;if(o!==void 0){let r=o;for(let a=0;a<r.length;a++){let l=r[a],h=this._getOptionValue(l.value);s.push(h)}}else{let r=i.options;for(let a=0;a<r.length;a++){let l=r[a];if(l.selected){let h=this._getOptionValue(l.value);s.push(h)}}}this.value=s,e(s)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=Ji(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=ae(n)))(s||n)}})()}static{this.\u0275dir=N({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,s){i&1&&D("change",function(r){return s.onChange(r.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[K([qi]),U]})}}return n})(),li=(()=>{class n{constructor(e,i,s){this._element=e,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(zt(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(zt(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(f(G),f(ce),f(ai,9))}}static{this.\u0275dir=N({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var Yi=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=B({type:n})}static{this.\u0275inj=x({})}}return n})();var ci=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:ii,useValue:e.callSetDisabledState??st}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=B({type:n})}static{this.\u0275inj=x({imports:[Yi]})}}return n})();var Ki=["*"];var Xi=["dialog"];var ui={animation:!0,transitionTimerDelayMs:5},en=(()=>{class n{constructor(){this.animation=ui.animation}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function tn(n){let{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n),i=parseFloat(t),s=parseFloat(e);return(i+s)*1e3}function hi(n){return typeof n=="string"}function rt(n){return n!=null}function nn(n){return n&&n.then}function pi(n){return(n||document.body).getBoundingClientRect()}function sn(n){return t=>new ut(e=>{let i=r=>n.run(()=>e.next(r)),s=r=>n.run(()=>e.error(r)),o=()=>n.run(()=>e.complete());return t.subscribe({next:i,error:s,complete:o})})}var on=()=>{},{transitionTimerDelayMs:rn}=ui,He=new Map,Q=(n,t,e,i)=>{let s=i.context||{},o=He.get(t);if(o)switch(i.runningTransition){case"continue":return ht;case"stop":n.run(()=>o.transition$.complete()),s=Object.assign(o.context,s),He.delete(t)}let r=e(t,i.animation,s)||on;if(!i.animation||window.getComputedStyle(t).transitionProperty==="none")return n.run(()=>r()),We(void 0).pipe(sn(n));let a=new I,l=new I,h=a.pipe(mt(!0));He.set(t,{transition$:a,complete:()=>{l.next(),l.complete()},context:s});let m=tn(t);return n.runOutsideAngular(()=>{let b=F(t,"transitionend").pipe(E(h),se(({target:M})=>M===t)),C=_t(m+rn).pipe(E(h));gt(C,b,l).pipe(E(h)).subscribe(()=>{He.delete(t),n.run(()=>{r(),a.next(),a.complete()})})}),a.asObservable()};var ct=function(n){return n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",n}(ct||{});var or=(()=>{let n=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,t=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(n()||t()):!1})();var an=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function fi(n){let t=Array.from(n.querySelectorAll(an)).filter(e=>e.tabIndex!==-1);return[t[0],t[t.length-1]]}var ln=(n,t,e,i=!1)=>{n.runOutsideAngular(()=>{let s=F(t,"focusin").pipe(E(e),ne(o=>o.target));F(t,"keydown").pipe(E(e),se(o=>o.which===ct.Tab),ze(s)).subscribe(([o,r])=>{let[a,l]=fi(t);(r===a||r===t)&&o.shiftKey&&(l.focus(),o.preventDefault()),r===l&&!o.shiftKey&&(a.focus(),o.preventDefault())}),i&&F(t,"click").pipe(E(e),ze(s),ne(o=>o[1])).subscribe(o=>o.focus())})};var rr=new Date(1882,10,12),ar=new Date(2174,10,25);var lr=1e3*60*60*24;var dt=1080,cn=24*dt,dn=12*dt+793,cr=29*cn+dn,dr=11*dt+204;var un=(()=>{class n{constructor(){this._ngbConfig=v(en),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ie=class{constructor(t,e,i){this.nodes=t,this.viewRef=e,this.componentRef=i}};var hn=(()=>{class n{constructor(){this._document=v(Me)}hide(){let e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,s=i.style,{overflow:o,paddingRight:r}=s;if(e>0){let a=parseFloat(window.getComputedStyle(i).paddingRight);s.paddingRight=`${a+e}px`}return s.overflow="hidden",()=>{e>0&&(s.paddingRight=r),s.overflow=o}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),pn=(()=>{class n{constructor(){this._nativeElement=v(G).nativeElement,this._zone=v(ve)}ngOnInit(){this._zone.onStable.asObservable().pipe(oe(1)).subscribe(()=>{Q(this._zone,this._nativeElement,(e,i)=>{i&&pi(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Q(this._zone,this._nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=j({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,s){i&2&&(ye("modal-backdrop"+(s.backdropClass?" "+s.backdropClass:"")),de("show",!s.animation)("fade",s.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Je],decls:0,vars:0,template:function(i,s){},encapsulation:2})}}return n})(),je=class{update(t){}close(t){}dismiss(t){}},fn=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],_n=["animation","backdropClass"],at=class{_applyWindowOptions(t,e){fn.forEach(i=>{rt(e[i])&&(t[i]=e[i])})}_applyBackdropOptions(t,e){_n.forEach(i=>{rt(e[i])&&(t[i]=e[i])})}update(t){this._applyWindowOptions(this._windowCmptRef.instance,t),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,t)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(E(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(E(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(t,e,i,s){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=s,this._closed=new I,this._dismissed=new I,this._hidden=new I,t.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,r)=>{this._resolve=o,this._reject=r}),this.result.then(null,()=>{})}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(t);else{let e=this._beforeDismiss();nn(e)?e.then(i=>{i!==!1&&this._dismiss(t)},()=>{}):e!==!1&&this._dismiss(t)}}_removeModalElements(){let t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():We(void 0);t.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),be(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},lt=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(lt||{}),gn=(()=>{class n{constructor(){this._document=v(Me),this._elRef=v(G),this._zone=v(ve),this._closed$=new I,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new $,this.shown=new I,this.hidden=new I}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":hi(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(oe(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},s=Q(this._zone,e,()=>e.classList.remove("show"),i),o=Q(this._zone,this._dialogEl.nativeElement,()=>{},i),r=be(s,o);return r.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),r}_show(){let e={animation:this.animation,runningTransition:"continue"},i=Q(this._zone,this._elRef.nativeElement,(o,r)=>{r&&pi(o),o.classList.add("show")},e),s=Q(this._zone,this._dialogEl.nativeElement,()=>{},e);be(i,s).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{F(e,"keydown").pipe(E(this._closed$),se(s=>s.which===ct.Escape)).subscribe(s=>{this.keyboard?requestAnimationFrame(()=>{s.defaultPrevented||this._zone.run(()=>this.dismiss(lt.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let i=!1;F(this._dialogEl.nativeElement,"mousedown").pipe(E(this._closed$),vt(()=>i=!1),bt(()=>F(e,"mouseup").pipe(E(this._closed$),oe(1))),se(({target:s})=>e===s)).subscribe(()=>{i=!0}),F(e,"click").pipe(E(this._closed$)).subscribe(({target:s})=>{e===s&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!i&&this._zone.run(()=>this.dismiss(lt.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){let i=e.querySelector("[ngbAutofocus]"),s=fi(e)[0];(i||s||e).focus()}}_restoreFocus(){let e=this._document.body,i=this._elWithFocus,s;i&&i.focus&&e.contains(i)?s=i:s=e,this._zone.runOutsideAngular(()=>{setTimeout(()=>s.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&Q(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=j({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(i,s){if(i&1&&De(Xi,7),i&2){let o;Se(o=we())&&(s._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(i,s){i&2&&(qe("aria-modal",!0)("aria-labelledby",s.ariaLabelledBy)("aria-describedby",s.ariaDescribedBy),ye("modal d-block"+(s.windowClass?" "+s.windowClass:"")),de("fade",s.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Je],ngContentSelectors:Ki,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(i,s){i&1&&(Dt(),p(0,"div",1,0)(2,"div",2),St(3),d()()),i&2&&ye("modal-dialog"+(s.size?" modal-"+s.size:"")+(s.centered?" modal-dialog-centered":"")+s.fullscreenClass+(s.scrollable?" modal-dialog-scrollable":"")+(s.modalDialogClass?" "+s.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2})}}return n})(),mn=(()=>{class n{constructor(){this._applicationRef=v(Nt),this._injector=v(le),this._environmentInjector=v(Ze),this._document=v(Me),this._scrollBar=v(hn),this._activeWindowCmptHasChanged=new I,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new $;let e=v(ve);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let i=this._windowCmpts[this._windowCmpts.length-1];ln(e,i.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(i.location.nativeElement)}})}_restoreScrollBar(){let e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,i,s){let o=s.container instanceof HTMLElement?s.container:rt(s.container)?this._document.querySelector(s.container):this._document.body;if(!o)throw new Error(`The specified modal container "${s.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let r=new je;e=s.injector||e;let a=e.get(Ze,null)||this._environmentInjector,l=this._getContentRef(e,a,i,r,s),h=s.backdrop!==!1?this._attachBackdrop(o):void 0,m=this._attachWindowComponent(o,l.nodes),b=new at(m,l,h,s.beforeDismiss);return this._registerModalRef(b),this._registerWindowCmpt(m),b.hidden.pipe(oe(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),r.close=C=>{b.close(C)},r.dismiss=C=>{b.dismiss(C)},r.update=C=>{b.update(C)},b.update(s),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),h&&h.instance&&h.changeDetectorRef.detectChanges(),m.changeDetectorRef.detectChanges(),b}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let i=Ee(pn,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_attachWindowComponent(e,i){let s=Ee(gn,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(s.hostView),e.appendChild(s.location.nativeElement),s}_getContentRef(e,i,s,o,r){return s?s instanceof yt?this._createFromTemplateRef(s,o):hi(s)?this._createFromString(s):this._createFromComponent(e,i,s,o,r):new ie([])}_createFromTemplateRef(e,i){let s={$implicit:i,close(r){i.close(r)},dismiss(r){i.dismiss(r)}},o=e.createEmbeddedView(s);return this._applicationRef.attachView(o),new ie([o.rootNodes],o)}_createFromString(e){let i=this._document.createTextNode(`${e}`);return new ie([[i]])}_createFromComponent(e,i,s,o,r){let a=le.create({providers:[{provide:je,useValue:o}],parent:e}),l=Ee(s,{environmentInjector:i,elementInjector:a}),h=l.location.nativeElement;return r.scrollable&&h.classList.add("component-host-scrollable"),this._applicationRef.attachView(l.hostView),new ie([[h]],l.hostView,l)}_setAriaHidden(e){let i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(s=>{s!==e&&s.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){let i=()=>{let s=this._modalRefs.indexOf(e);s>-1&&(this._modalRefs.splice(s,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{let i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$e=(()=>{class n{constructor(){this._injector=v(le),this._modalStack=v(mn),this._config=v(un)}open(e,i={}){let s=T(P(T({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._injector,e,s)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ur=new V("live announcer delay",{providedIn:"root",factory:()=>100});function vn(n,t){if(n&1&&(p(0,"p",9),_(1),d()),n&2){let e=ue();g(),z(e.errorText)}}var gi=(()=>{class n{constructor(e){this.modalService=e}ngOnInit(){this.programText=this.program.text}save(){try{X.assemble(this.programText)}catch(e){this.errorText=e.message;return}this.program.text=this.programText,this.dismiss()}dismiss(){this.modalService.dismissAll()}static{this.\u0275fac=function(i){return new(i||n)(f($e))}}static{this.\u0275cmp=j({type:n,selectors:[["tape-editor-component"]],inputs:{program:"program"},decls:13,vars:3,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["rows","20","name","programText","spellcheck","false",2,"width","100%",3,"ngModelChange","ngModel"],["class","text-danger",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],[1,"text-danger"]],template:function(i,s){i&1&&(p(0,"div",0)(1,"h4",1),_(2),d(),p(3,"button",2),D("click",function(){return s.dismiss()}),p(4,"span",3),_(5,"\xD7"),d()()(),p(6,"div",4)(7,"textarea",5),Mt("ngModelChange",function(r){return Et(s.programText,r)||(s.programText=r),r}),_(8,"    "),d(),W(9,vn,2,1,"p",6),d(),p(10,"div",7)(11,"button",8),D("click",function(){return s.save()}),_(12,"Save"),d()()),i&2&&(g(2),Y("Tape editor: ",s.program.title,""),g(5),Ct("ngModel",s.programText),g(2),w("ngIf",s.errorText))},dependencies:[Te,Ue,ti,ot],encapsulation:2})}}return n})();function yn(n,t){if(n&1&&(p(0,"option",18),_(1),d()),n&2){let e=t.$implicit;w("value",e.id),g(),z(e.title)}}function Dn(n,t){if(n&1&&(p(0,"p",19),_(1),d()),n&2){let e=ue();g(),z(e.scene.errorText)}}function Sn(n,t){if(n&1&&(p(0,"p",13),_(1),J(2,"br"),d()),n&2){let e=t.$implicit;g(),z(e)}}var mi=(()=>{class n{constructor(e,i){this.titleService=e,this.modalService=i,this.isOrtographicProjection=!1,e.setTitle("Harwell Dekatron")}ngOnInit(){let e=this.appCanvas.surface.nativeElement.getContext("webgl");if(e){let i=new Ft(e);this.scene=new Pe(i),this.appCanvas.setScene(this.scene)}}onChangeOrtographicProjection(){this.isOrtographicProjection=!this.isOrtographicProjection,this.scene.camera.orthographic=this.isOrtographicProjection}editTape(){let e=this.modalService.open(gi);e.componentInstance.program=this.scene.findSelectedProgram()}onProgramChange(e){let i=e;this.scene.onProgramChange(i.value)}static{this.\u0275fac=function(i){return new(i||n)(f(It),f($e))}}static{this.\u0275cmp=j({type:n,selectors:[["harwell-component"]],viewQuery:function(i,s){if(i&1&&De(Ne,7),i&2){let o;Se(o=we())&&(s.appCanvas=o.first)}},decls:45,vars:13,consts:[["id","bodyContainer"],["id","leftPanel"],[3,"isAnimated"],[3,"isOpen"],["accordion-heading","","type","button",1,"btn","btn-link","btn-block","clearfix"],[1,"badge","badge-arrow","float-left"],[1,"float-left"],[1,"mb-3",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"btn-toolbar","mb-3"],["type","button",1,"btn","btn-primary","btn-sm","mr-2",3,"click"],["type","button",1,"btn","btn-primary","mr-2",3,"click","disabled"],["type","button",1,"btn","btn-primary","mr-4",3,"click","disabled"],[1,"mb-0"],[2,"min-height","5em"],["class","text-danger",4,"ngIf"],["class","mb-0",4,"ngFor","ngForOf"],["value","ds","type","checkbox",3,"change","checked"],[3,"value"],[1,"text-danger"]],template:function(i,s){i&1&&(p(0,"div",0)(1,"div",1)(2,"accordion",2)(3,"accordion-group",3)(4,"button",4)(5,"span",5),_(6,"\u2B9E"),d(),p(7,"span",6),_(8,"Control"),d()(),p(9,"select",7),D("change",function(r){return s.onProgramChange(r.target)}),W(10,yn,2,2,"option",8),d(),p(11,"div",9)(12,"button",10),D("click",function(){return s.editTape()}),_(13,"Edit "),d(),p(14,"button",10),D("click",function(){return s.scene.resetProgram()}),_(15,"Reload "),d()(),J(16,"hr"),p(17,"div",9)(18,"button",11),D("click",function(){return s.scene.stepProcessor()}),_(19,"Step"),d(),p(20,"button",12),D("click",function(){return s.scene.runProcessor()}),_(21),d(),J(22,"br"),d(),p(23,"p",13),_(24),d(),p(25,"p",14),_(26),d(),W(27,Dn,2,1,"p",15),d(),p(28,"accordion-group",3)(29,"button",4)(30,"span",5),_(31,"\u2B9E"),d(),p(32,"span",6),_(33,"Output"),d()(),W(34,Sn,3,1,"p",16),d(),p(35,"accordion-group")(36,"button",4)(37,"span",5),_(38,"\u2B9E"),d(),p(39,"span",6),_(40,"Settings"),d()(),p(41,"label")(42,"input",17),D("change",function(){return s.onChangeOrtographicProjection()}),d(),_(43," Orthographic projection "),d()()()(),J(44,"app-canvas"),d()),i&2&&(g(2),w("isAnimated",!0),g(),w("isOpen",!0),g(7),w("ngForOf",s.scene.programList),g(8),w("disabled",s.scene.processor.state.finished),g(2),w("disabled",s.scene.processor.state.finished),g(),Y(" ",s.scene.isSingleStepping?"Run":"Stop"," "),g(3),wt("Tape ",s.scene.processor.state.tapeNumber,", block ",s.scene.processor.currentBlockNumber,""),g(2),Y("Order: ",s.scene.nextInstructionText,""),g(),w("ngIf",s.scene.isInErrorState),g(),w("isOpen",!0),g(6),w("ngForOf",s.scene.processor.output),g(8),w("checked",s.isOrtographicProjection))},dependencies:[Rt,Te,Ne,Pt,xt,ri,li],styles:["#leftPanel[_ngcontent-%COMP%]{width:350px;height:768px;float:left;overflow-y:auto;white-space:normal}#bodyContainer[_ngcontent-%COMP%]{white-space:nowrap}.badge-arrow[_ngcontent-%COMP%]{margin-top:4px;transition-duration:.2s;transition-property:transform}.panel-open[_ngcontent-%COMP%]   .badge-arrow[_ngcontent-%COMP%]{transform:rotate(90deg)}ul[_ngcontent-%COMP%]{padding-left:25px}.gear-group-a[_ngcontent-%COMP%]{background-color:#99801a}.gear-group-l[_ngcontent-%COMP%]{background-color:#e6801a}.gear-group-n[_ngcontent-%COMP%]{background-color:#40bf4d}.gear-group-o[_ngcontent-%COMP%]{background-color:#fff}.gear-group-p[_ngcontent-%COMP%]{background-color:#80bf33}.gear-group-e[_ngcontent-%COMP%]{background-color:#7366b3}.gear-group-h[_ngcontent-%COMP%]{background-color:#a666b3}.gear-group-c[_ngcontent-%COMP%]{background-color:#80bfe6}.gear-group-k[_ngcontent-%COMP%]{background-color:#73ccbf}"]})}}return n})();var wn=[{path:"",component:mi}],bi=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=B({type:n})}static{this.\u0275inj=x({imports:[Ke.forChild(wn),Ke]})}}return n})();var Pr=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=B({type:n})}static{this.\u0275inj=x({imports:[At,bi,Bt,Vt.forRoot(),ci]})}}return n})();export{Pr as HarwellModule};
